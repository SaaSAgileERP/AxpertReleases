/*https://web.agile-labs.com/minZIP/*//*version=3.9.1*/var fldAutoData=[],fldAutoList="",fldExpData=[],colNames=[],colVExp=[],colfExp=[],aportionWhat=[],aportionAgainst=[],aportionWhatVal=[],isQuery="",QueryData="",colSource=[],thisFldId="",valuesep="",rowsep="",rowObj=$(),isfromSqlExec=!1,tblFldFTot=[];function LoadTableEvents(dvId){var autoDiv=dvId==undefined?"#divTable":dvId;$j(dvId).find(".tblFromSelect:not(span)").select2(),createFormSelect(dvId+" .tblFromSelect:not(span)"),$j(dvId+" .number").unbind("keypress"),$j(".number").keypress(function(e){return CheckNumeric(e,$j(this).val())}),$j("input.number").on("input",function(){var e=$j(this).val(),t=$j(this).attr("id"),a=$j(this).attr("data-fInd");if(t!=undefined){var l=callParentNew("FMaxLength")[a],n=callParentNew("FDecimal")[a];if(n!=undefined&&n>0){var r=l-n-1;if(-1==e.indexOf("."))e.length>r&&$j(this).val(e.slice(0,r));else if(-1!=e.indexOf(".")){var o=e.substring(0,e.indexOf(".")),i=e.substring(e.indexOf(".")+1,e.length);o.length>r&&(o=o.slice(0,r)),i.length>n&&(i=i.slice(0,n)),$j(this).val(o+"."+i)}}}}),$j(":text").unbind("blur"),$j(":text").blur(function(e){MainBlur($j(this),"input")}),$j("select").unbind("change"),$j("select").change(function(){MainBlur($j(this),"select")}),$(dvId).find(".selection .select2-selection").addClass("form-select-sm"),$(dvId).find(".select2-hidden-accessible").addClass("form-select-sm"),$(dvId).find(".fldmultiSelect").addClass("py-0");var glType=eval(callParent("gllangType")),dtpkrRTL=!1;dtpkrRTL="ar"==glType;var glCulture=eval(callParent("glCulture")),dtFormat="d/m/Y";"en-us"==glCulture&&(dtFormat="m/d/Y"),$j(dvId+" .flatpickr-input").flatpickr({dateFormat:dtFormat,disableMobile:"true",allowInput:!0,onOpen:function(e,t,a){},onChange:function(e,t,a){},onClose:function(e,t,a){MainBlur($(a.element),"input")}}),$j(dvId+" .input-group-text").on("click",function(){$j(dvId+" .flatpickr-input")[0]._flatpickr.open()})}$j(document).ready(function(){GetTableHtml(),$j(":text").blur(function(e){MainBlur($j(this),"input")}),$j("select").change(function(){MainBlur($j(this),"select")}),LoadTableEvents("#divTable")});var dtAssoc=[],searchResult=[],AutPageNo=1,AutPageSize=50,rcount=0,fetchRCount=callParentNew("FetchPickListRows")||1e3;PageCount=0;var CangefldName="",isNavigation=!1,refreshAC=!1,pickarrow=!1;function createFormSelect(fld){var formSelect=$(fld),fldNameAc="",fieldName="",fastdll="",termVal="",depFldName="";formSelect.select2({ajax:{url:"tstruct.aspx/GetAutoCompleteData",type:"POST",dataType:"json",contentType:"application/json; charset=utf-8",delay:250,data:function(e){termVal=e.term==undefined?"":e.term;var t=$(this).attr("data-id");fastdll=$(callParentNew(t,"id")).hasClass("fastdll");var a=$(callParentNew(t,"id")).hasClass("isrefreshsave"),l=GetSourceParamValue($(this)),n=GetAutoCompData(fldNameAc,termVal,AutPageNo,AutPageSize),r=fldNameAc.substring(0,fldNameAc.lastIndexOf("F")-3),o="";o=void 0!==callParentNew("wsPerfEnabled")&&callParentNew("wsPerfEnabled")?callParentNew("ISBoundAutoCom("+r+","+fldNameAc+")","function"):callParentNew("ISBoundNew("+r+","+fldNameAc+")","function");var i=callParentNew("GetFieldIndex("+r+")","function"),s=callParentNew("FldIsAPI")[i],d=callParentNew("FldDSqlParams")[i];return JSON.stringify({tstDataId:callParentNew("tstDataId"),FldName:r,FltValue:termVal,ChangedFields:parent.ChangedFields,ChangedFieldDbRowNo:parent.ChangedFieldDbRowNo,ChangedFieldValues:parent.ChangedFieldValues,DeletedDCRows:parent.DeletedDCRows,pageData:n,fastdll:fastdll,fldNameAc:fldNameAc,refreshAC:refreshAC,pickArrow:pickarrow,parentsFlds:o,rfSave:a,IsApiFld:s,tblSourceParams:l,isTstHtmlLs:callParentNew("resTstHtmlLS"),ddlFldSqlParams:d,ddlSqlPNames:""})},processResults:function processResults(data){refreshAC=!1,callParentNew("resTstHtmlLS=","");try{var result=data.d.toString().replace(new RegExp("\\n","g"),"");if(""!=result&&(result.split("♠*♠").length>1&&(tstDataId=result.split("♠*♠")[0],result=result.split("♠*♠")[1]),result.split("*♠*").length>1&&(result=result.split("*♠*")[0])),callParentNew("CheckSessionTimeout("+result+")","function"))return;if(result=result.toString().replace(new RegExp("\\t","g"),"&#9;"),ChangedFields=new Array,ChangedFieldDbRowNo=new Array,ChangedFieldValues=new Array,DeletedDCRows=new Array,!result.toLowerCase().includes("access violation")||!result.toLowerCase().includes("asbtstruct.dll")){result.indexOf("♥")>-1&&(result=result.split("♥")[0]);var serResult=$.parseJSON(result);if(datasss=serResult,serResult.error)return void ExecErrorMsg(serResult.error,"autocomplete");if(dtAssoc=serResult.pickdata[3].data,dtAssoc!=undefined&&0!=dtAssoc.length){if(fastdll){var aSearch=[];if($(dtAssoc).each(function(e,t){t.i=t.i.replace(/\^\^dq/g,'"'),t.i.toLowerCase().indexOf(termVal.toLowerCase())>=0&&aSearch.push(t)}),$("#"+fldNameAc).data("rowcount",aSearch.length),0!=aSearch.length){var result=$.map(aSearch,function(e){return e.i=e.i.replace(/\^\^dq/g,'"'),{id:""==e.v?e.i:e.v,text:e.i,dep:e.d}});return searchResult=result,{results:result}}var cutMsg=eval(callParent("lcm[0]"));return{results:"",noResults:cutMsg}}var result=$.map(dtAssoc,function(e){return e.i=e.i.replace(/\^\^dq/g,'"'),{id:""==e.v?e.i:e.v,text:e.i,dep:e.d}});return searchResult=result,{results:result}}var cutMsg=eval(callParent("lcm[0]"));return{results:"",noResults:cutMsg}}AxWaitCursor(!1),ShowDimmer(!1),$("#reloaddiv").show(),$("#dvlayout").hide()}catch(exception){-1!=exception.message.toLowerCase().indexOf("access violation")&&(AxWaitCursor(!1),ShowDimmer(!1),$("#reloaddiv").show(),$("#dvlayout").hide())}}},placeholder:"Search for a repository",minimumInputLength:0}).on("select2:open",function(e){var t=$(this).attr("data-id");fldNameAc=t})}function GetTableHtml(){var e="",t="",a=!1;try{parent.ChangedTblFields=new Array,parent.ChangedTblFieldVals=new Array,thisFldId=$("#hdnfieldId").val();var l="",n=!1,r="",o="";if(void 0!==thisFldId&&"fromsqlexec"==thisFldId)isfromSqlExec=!0,l=callParentNew("_sqlParStr"),n=!1,r="",o=callParentNew("_sqlTblJson");else{l=$(callParentNew(thisFldId,"id")).val(),n=$(callParentNew(thisFldId,"id")).prop("disabled"),r=callParentNew("GetFieldsRowNo("+thisFldId+")","function");var i=thisFldId.substring(0,thisFldId.lastIndexOf("F")-3),s=callParentNew("GetFieldIndex("+i+")","function");o=callParentNew("FTableTypeVal")[s]}if(""!=o){if((o=RepSpecialCharsInHTML(o)).startsWith("{")||o.startsWith("db@"))o.startsWith("db@")&&(t=o=GetDBProcTableJson(o));else{var d=o.split("~")[1],c=callParentNew("GetDcNo("+d+")","function"),u=$j.inArray(c,parent.DCFrameNo);t=o=GetstrTableJson("True"==parent.DCIsGrid[u]?$(callParentNew(d+r+"F"+c,"id")).val():$(callParentNew(d+"000F"+c,"id")).val())}var p=JSON.parse(o);if(void 0!==p){var f=p.props.type,v=p.props.colcount,m=p.props.rowcount,h=p.props.deleterow,b=p.props.addrow;rowsep=p.props.rowseparator,valuesep=p.props.valueseparator,"undefined"!=typeof p.props.sql&&(isQuery=p.props.sql);var g=1==n?"disabled":"";if("undefined"!=typeof parent.transid&&"b_sql"==parent.transid&&(g=""),"table"==f){var w="";""!=l&&(w=l.split(rowsep)).length>m&&(m=w.length),""==w&&"true"==isQuery&&SqlFillData();var N="",y="";N+='<tr class="fw-bold fs-6 text-gray-800 border-bottom-2 border-gray-200">',"t"!=h.toLowerCase()&&"true"!=h.toLowerCase()||(N+='<th class="w-10px"><div class="form-check form-check-sm form-check-custom p-2"><input type="checkbox" class="form-check-input fgHdrChk" name="chkItem" onclick="javascript:CheckAll(this);"></div></th>');for(var F=0;F<v;F++){var x=p.columns[F+1].caption,C="";"undefined"!=typeof p.columns[F+1].hide&&""!=p.columns[F+1].hide&&(C="t"==p.columns[F+1].hide.toLowerCase()?" d-none ":""),colNames.push(p.columns[F+1].name),"undefined"!=typeof p.columns[F+1].ftot?tblFldFTot.push(p.columns[F+1].ftot):tblFldFTot.push(""),parent.ChangedTblFields.push(p.columns[F+1].name),parent.ChangedTblFieldVals.push(""),N+=""!=C?'<th class="'+C+'">'+x+"</th>":"<th>"+x+"</th>";var T=p.columns[F+1].exp;colfExp.push(T);var I="";if(""!=T&&(T=T.replace(/,/g,"♦"),I=callParentNew("Evaluate("+p.columns[F+1].name+",000,"+T+",expr,table)","function")),fldExpData.push(I),colVExp.push(p.columns[F+1].vexp),"undefined"!=typeof p.columns[F+1].aportionwhat&&""!=p.columns[F+1].aportionwhat){aportionWhat.push(p.columns[F+1].aportionwhat);var P=p.columns[F+1].aportionwhat,D=$j($j("[id*='"+P+"']",doParentOpInIframe("document","rtn","[id*='"+P+"']")).find("input")).attr("id");aportionWhatVal.push($(callParentNew(D,"id")).val())}else aportionWhat.push(""),aportionWhatVal.push("");"undefined"!=typeof p.columns[F+1].aportionagainst?aportionAgainst.push(p.columns[F+1].aportionagainst):aportionAgainst.push("")}N+="</tr>";for(var j=0;j<m;j++){var A="";"undefined"!=typeof w[j]&&""!=w[j]&&""!=w&&(A=(A=w[j]).split(valuesep)),y+="<tr id="+j+">","t"!=h.toLowerCase()&&"true"!=h.toLowerCase()||(y+='<td class="input-group-sm"><div class="form-check form-check-sm form-check-custom p-2"><input type="checkbox" class="form-check-input fgChk" name="chkItem" onclick="javascript:ChkHdrCheckbox(this);" '+g+"></div></td>");var S=function(){var e="";e="undefined"!=typeof A[F]&&""!=A[F]&&""!=A?A[F]:"undefined"!=typeof fldExpData[F]&&""!=fldExpData[F]?fldExpData[F]:"undefined"!=typeof aportionWhatVal[F]&&""!=aportionWhatVal[F]&&0==j?aportionWhatVal[F]:p.columns[F+1].value;var t=p.columns[F+1].source,a="";"undefined"!=typeof p.columns[F+1].allowempty&&""!=p.columns[F+1].allowempty&&(a="f"==p.columns[F+1].allowempty.toLowerCase()?" data-ae='false' ":"");var l="";"undefined"!=typeof p.columns[F+1].allowduplicate&&""!=p.columns[F+1].allowduplicate&&(l="f"==p.columns[F+1].allowduplicate.toLowerCase()?" data-ad='false' ":"");var n="";"undefined"!=typeof p.columns[F+1].readyonly&&""!=p.columns[F+1].readyonly&&(n="t"==p.columns[F+1].readyonly.toLowerCase()?" disabled ":"");var o="";"undefined"!=typeof p.columns[F+1].hide&&""!=p.columns[F+1].hide&&(o="t"==p.columns[F+1].hide.toLowerCase()?" d-none ":""),colSource.push(t);var i=callParentNew("GetFieldIndex("+t+")","function"),s=(callParentNew("GetDWBFieldType('',"+i+")","function"),callParentNew("GetDcNo("+t+")","function")),d=r;callParentNew("IsDcGrid("+s+")","function")||(d="000");var c=t+d+"F"+s;if(void 0!==callParentNew("FMoe")&&"Select"==callParentNew("FMoe")[i])if("True"==callParentNew("FldIsSql")[i])y+='<td class="input-group-sm '+o+'"><select '+g+n+a+l+' class="combotem Family form-control form-select tblFromSelect fldtableinput" data-control="select2" name="'+colNames[F]+'" id="'+colNames[F]+"R"+j+'" value="'+e+'" data-id="'+c+'" data-placeholder="Select an option" data-allow-clear="true">',""!=e&&(y+='<option value="'+e+'" selected="selected">'+e+"</option>"),y+="</select></td>";else if(O="",$(callParentNew(c)).find("option").each(function(){""!=e&&$(this)[0].value==e?O+=$(this)[0].outerHTML.replace("<option ","<option selected "):O+=$(this)[0].outerHTML.replace('selected="selected"',"")}),""==O){var u=$(callParentNew(c)).data("val").split(","),f=""==$(callParentNew(c)).val()?e:$(callParentNew(c)).val();for(E=0;E<u.length;E++)""!=f&&f==u[E]?O+='<option selected="selected" value="'+u[E]+'">'+(""==u[E]?"-- Select --":u[E])+"</option>":O+='<option value="'+u[E]+'">'+(""==u[E]?"-- Select --":u[E])+"</option>";y+='<td class="input-group-sm '+o+'"><select '+g+n+a+l+' class="tem Family form-control" name="'+colNames[F]+'" id="'+colNames[F]+"R"+j+'" value="'+f+'">'+O+"</select></td>"}else y+='<td class="input-group-sm '+o+'"><select '+g+n+a+l+' class="tem Family form-control" name="'+colNames[F]+'" id="'+colNames[F]+"R"+j+'" value="'+e+'">'+O+"</select></td>";else if(void 0!==callParentNew("FMoe")&&"Accept"==callParentNew("FMoe")[i]&&"True"==callParentNew("FldIsSql")[i])""!=t&&""==e&&(e=$(callParentNew(c)).val()),void 0===e&&(e=""),y+='<td class="input-group-sm '+o+'"><input '+g+n+a+l+' type="text" class="tem Family form-control fldtableinput" name="'+colNames[F]+'" id="'+colNames[F]+"R"+j+'" value="'+e+'"></td>';else if("undefined"!=typeof aportionWhat[F]&&""!=aportionWhat[F])y+='<td class="input-group-sm '+o+'"><input '+g+n+a+l+' type="text" class="tem Family form-control fldtableinput" readonly name="'+colNames[F]+'" id="'+colNames[F]+"R"+j+'" value="'+e+'"></td>';else if(void 0!==callParentNew("FDataType")&&"Numeric"==callParentNew("FDataType")[i])""!=t&&""==e&&(e=$(callParentNew(c)).val()),y+='<td class="input-group-sm '+o+'"><input '+g+n+a+l+' type="text" style="text-align:right;" class="tem Family form-control number fldtableinput" data-fInd="'+i+'" name="'+colNames[F]+'" id="'+colNames[F]+"R"+j+'" value="'+e+'"></td>';else if(void 0!==callParentNew("FDataType")&&"Date/Time"==callParentNew("FDataType")[i])""!=t&&""==e&&(e=$(callParentNew(c)).val()),void 0===e&&(e=""),y+='<td class="input-group input-group-sm '+o+'"><input '+g+n+a+l+' type="text" class="tem Family form-control flatpickr-input fldtableinput" name="'+colNames[F]+'" id="'+colNames[F]+"R"+j+'" value="'+e+'">',y+='<span class="input-group-text" id="basic-addon2" data-toggle><span class="material-icons material-icons-style cursor-pointer fs-4">calendar_today</span></span>';else if(""!=t&&"Accept"==callParentNew("FMoe")[i]&&""!=$(callParentNew(c)).val()&&$(callParentNew(c)).val().indexOf(",")>0){var v=$(callParentNew(c)).val().split(","),m=e;for(O="",O+='<option value="">-- Select --</option>',E=0;E<v.length;E++)""!=m&&m==v[E]?O+='<option selected="selected" value="'+v[E]+'">'+v[E]+"</option>":O+='<option value="'+v[E]+'">'+v[E]+"</option>";y+='<td class="input-group-sm '+o+'"><select '+g+n+a+l+' class="tem Family form-control" name="'+colNames[F]+'" id="'+colNames[F]+"R"+j+'" value="'+m+'">'+O+"</select></td>"}else isfromSqlExec&&"datatypefld"==colNames[F]?(O="",O+='<option selected="selected" value="c">'+e+"</option>",O+='<option value="n">Numeric</option>',O+='<option value="d">Date/Time</option>',y+='<td class="input-group-sm '+o+'"><select '+g+n+a+l+' class="tem Family form-control" name="'+colNames[F]+'" id="'+colNames[F]+"R"+j+'" value="c">'+O+"</select></td>"):(""!=t&&""==e&&(e=$(callParentNew(c)).val()),void 0===e&&(e=""),y+='<td class="input-group-sm '+o+'"><input '+g+n+a+l+' type="text" class="tem Family form-control fldtableinput" name="'+colNames[F]+'" id="'+colNames[F]+"R"+j+'" value="'+e+'"></td>');parent.ChangedTblFieldVals[F]=0==j?e:parent.ChangedTblFieldVals[F]+"~"+e};for(F=0;F<v;F++){S()}y+="</tr>"}e='<div class="">',e+='<div class="pb-5">',"t"!=b.toLowerCase()&&"true"!=b.toLowerCase()||(e+='<div class="btn btn-sm btn-icon btn-white btn-color-gray-600 btn-active-primary me-2 shadow-sm pull-left '+g+'"><span class="material-icons material-icons-style material-icons-3" title="Add" onclick="AddTableRows(\'fldTable\',\'addrowclk\');">add</span></div>'),"t"!=h.toLowerCase()&&"true"!=h.toLowerCase()||(e+='<div class="btn btn-sm btn-icon btn-white btn-color-gray-600 btn-active-primary me-2 shadow-sm pull-left '+g+'"><span class="material-icons material-icons-style material-icons-3" title="Delete" onclick="DeleteTableRows(\'fldTable\');">delete_outline</span></div>'),""!=isQuery&&(e+='<div class="btn btn-sm btn-icon btn-white btn-color-gray-600 btn-active-primary me-2 shadow-sm pull-left '+g+'"><span class="material-icons material-icons-style material-icons-3" title="Fill Data" onclick="SqlFillData();">view_list</span></div>'),e+='<table id="fldTable" class="table table-bordered table-sm mt-10">',e+="<thead>",e+=N,e+="</thead>",e+="<tbody>",e+=y,e+="</tbody>",e+="</table>",e+="</div>",e+="<div></div>",e+=isfromSqlExec?'<div class="float-end"><a href="javascript:void(0)" onclick="ClearTableData(\'fldTable\');" class="btn btn-white btn-color-gray-700 btn-active-primary d-inline-flex align-items-center shadow-sm me-2 '+g+'"><span class="material-icons">clear</span>Clear</a><a href="javascript:void(0);" title="Ok" onclick="AddTableData(\''+thisFldId+"','"+valuesep+"','"+rowsep+'\');" class="btn btn-primary d-inline-flex align-items-center shadow-sm me-2 '+g+'"><span class="material-icons">save</span>Ok</a></div>':'<div class="float-end d-none"><a href="javascript:void(0)" onclick="ClearTableData(\'fldTable\');" class="btn btn-white btn-color-gray-700 btn-active-primary d-inline-flex align-items-center shadow-sm me-2 '+g+'"><span class="material-icons">clear</span>Clear</a><a href="javascript:void(0);" title="Ok" onclick="AddTableData(\''+thisFldId+"','"+valuesep+"','"+rowsep+'\');" class="btn btn-primary d-inline-flex align-items-center shadow-sm me-2 '+g+'"><span class="material-icons">save</span>Ok</a></div>',e+="</div>",""==w&&"sqlDescr"==isQuery&&setTimeout(function(){SqlFillData()},0),""!=w&&(a=!0)}else{var R="";""!=l&&(R=(R=l).split(valuesep));var V='<div id="divtblForm" >',k=function(){var e="";"undefined"!=typeof p.columns[F+1].hide&&""!=p.columns[F+1].hide&&(e="t"==p.columns[F+1].hide.toLowerCase()?" d-none ":"");var t=p.columns[F+1].caption;V+='<div class="col-lg-12 col-sm-3 col-md-3 col-xs-12 '+e+'"><label>'+t+"</label></div>",V+='<div class="col-lg-12 col-sm-9 col-md-9 col-xs-12 '+e+'">',colNames.push(p.columns[F+1].name),parent.ChangedTblFields.push(p.columns[F+1].name),parent.ChangedTblFieldVals.push("");var a=p.columns[F+1].exp;if(colfExp.push(a),I="",""!=a&&(a=a.replace(/,/g,"♦"),I=callParentNew("Evaluate("+p.columns[F+1].name+",000,"+a+",expr,table)","function")),fldExpData.push(I),colVExp.push(p.columns[F+1].vexp),"undefined"!=typeof p.columns[F+1].aportionwhat&&""!=p.columns[F+1].aportionwhat){aportionWhat.push(p.columns[F+1].aportionwhat);var l=p.columns[F+1].aportionwhat;D=$j($j("[id*='"+l+"']",doParentOpInIframe("document","rtn","[id*='"+l+"']")).find("input")).attr("id"),aportionWhatVal.push($(callParentNew(D,"id")).val())}else aportionWhat.push(""),aportionWhatVal.push("");"undefined"!=typeof p.columns[F+1].aportionagainst?aportionAgainst.push(p.columns[F+1].aportionagainst):aportionAgainst.push("");var n="";n="undefined"!=typeof R[F]&&""!=R[F]&&""!=R?R[F]:"undefined"!=typeof fldExpData[F]&&""!=fldExpData[F]?fldExpData[F]:"undefined"!=typeof aportionWhatVal[F]&&""!=aportionWhatVal[F]?aportionWhatVal[F]:p.columns[F+1].value;var o=p.columns[F+1].source,i="";"undefined"!=typeof p.columns[F+1].allowempty&&""!=p.columns[F+1].allowempty&&(i="f"==p.columns[F+1].allowempty.toLowerCase()?" data-ae='false' ":"");var s="";"undefined"!=typeof p.columns[F+1].allowduplicate&&""!=p.columns[F+1].allowduplicate&&(s="f"==p.columns[F+1].allowduplicate.toLowerCase()?" data-ad='false' ":"");var d="";"undefined"!=typeof p.columns[F+1].readyonly&&""!=p.columns[F+1].readyonly&&(d="t"==p.columns[F+1].readyonly.toLowerCase()?" disabled ":""),colSource.push(o);var c=callParentNew("GetFieldIndex("+o+")","function"),u=(callParentNew("GetDWBFieldType('',"+c+")","function"),callParentNew("GetDcNo("+o+")","function")),f=r;callParentNew("IsDcGrid("+u+")","function")||(f="000");var v=o+f+"F"+u;if("Select"==callParentNew("FMoe")[c])if("True"==callParentNew("FldIsSql")[c])V+="<select "+g+d+i+s+' class="combotem Family form-control form-select tblFromSelect fldtableinput" data-control="select2" name="'+colNames[F]+'" id="'+colNames[F]+'R0" value="'+n+'" data-id="'+v+'" data-placeholder="Select an option" data-allow-clear="true">',""!=n&&(V+='<option value="'+n+'" selected="selected">'+n+"</option>"),V+="</select>";else if(O="",$(callParentNew(v)).find("option").each(function(){""!=n&&$(this)[0].value==n?O+=$(this)[0].outerHTML.replace("<option ","<option selected "):O+=$(this)[0].outerHTML.replace('selected="selected"',"")}),""==O){var m=$(callParentNew(v)).data("val").split(","),h=""==$(callParentNew(v)).val()?n:$(callParentNew(v)).val();for(E=0;E<m.length;E++)""!=h&&h==m[E]?O+='<option selected="selected" value="'+m[E]+'">'+(""==m[E]?"-- Select --":m[E])+"</option>":O+='<option value="'+m[E]+'">'+(""==m[E]?"-- Select --":m[E])+"</option>";V+="<select "+g+d+i+s+' class="tem Family form-control" name="'+colNames[F]+'" id="'+colNames[F]+'R0" value="'+h+'">'+O+"</select>"}else V+="<select "+g+d+i+s+' class="tem Family form-control" name="'+colNames[F]+'" id="'+colNames[F]+'R0" value="'+n+'">'+O+"</select>";else if("Accept"==callParentNew("FMoe")[c]&&"True"==callParentNew("FldIsSql")[c])""!=o&&""==n&&(n=$(callParentNew(v)).val()),void 0===n&&(n=""),V+="<input "+g+d+i+s+' type="text" class="tem Family form-control fldtableinput" name="'+colNames[F]+'" id="'+colNames[F]+'R0" value="'+n+'">';else if("undefined"!=typeof aportionWhat[F]&&""!=aportionWhat[F])V+="<input "+g+d+i+s+' type="text" class="tem Family form-control fldtableinput" readonly name="'+colNames[F]+'" id="'+colNames[F]+'R0" value="'+n+'">';else if("Numeric"==callParentNew("FDataType")[c])""!=o&&""==n&&(n=$(callParentNew(v)).val()),void 0===n&&(n=""),V+="<input "+g+d+i+s+' type="text" style="text-align:right;" class="tem Family form-control number fldtableinput" data-fInd="'+c+'" name="'+colNames[F]+'" id="'+colNames[F]+'R0" value="'+n+'">';else if("Date/Time"==callParentNew("FDataType")[c])""!=o&&""==n&&(n=$(callParentNew(v)).val()),void 0===n&&(n=""),V+='<div class="input-group input-group-sm"><input '+g+d+i+s+' type="text" class="tem Family form-control flatpickr-input fldtableinput" name="'+colNames[F]+'" id="'+colNames[F]+'R0" value="'+n+'">',V+='<span class="input-group-text" id="basic-addon2" data-toggle><span class="material-icons material-icons-style cursor-pointer fs-4">calendar_today</span></span>';else if(""!=o&&"Accept"==callParentNew("FMoe")[c]&&""!=$(callParentNew(v)).val()&&$(callParentNew(v)).val().indexOf(",")>0){var b=$(callParentNew(v)).val().split(","),w=n;for(O="",O+='<option value="">-- Select --</option>',E=0;E<b.length;E++)""!=w&&w==b[E]?O+='<option selected="selected" value="'+b[E]+'">'+b[E]+"</option>":O+='<option value="'+b[E]+'">'+b[E]+"</option>";V+="<select "+g+d+i+s+' class="tem Family form-control" name="'+colNames[F]+'" id="'+colNames[F]+'R0" value="'+w+'">'+O+"</select>"}else""!=o&&""==n&&(n=$(callParentNew(v)).val()),void 0===n&&(n=""),V+="<input "+g+d+i+s+' type="text" class="tem Family form-control fldtableinput" name="'+colNames[F]+'" id="'+colNames[F]+'R0" value="'+n+'">';parent.ChangedTblFieldVals[F]=0==F?n:parent.ChangedTblFieldVals[F]+"~"+n,V+='</div><div class="clearfix"></div>'};for(F=0;F<v;F++){var O,E;k()}e="<div>",e+=V+="</div>",e+='</div><div class="clearfix"></div>',e+='<div class="d-none"><div class="col-12 float-end"><a href="javascript:void(0)" onclick="ClearTableData(\'fldTable\');" title="Clear" class="btn btn-white btn-color-gray-700 btn-active-primary d-inline-flex align-items-center shadow-sm me-2 '+g+'"><span class="material-icons">clear</span>Clear</a><a href="javascript:void(0);" title="Ok" onclick="AddTableData(\''+thisFldId+"','"+valuesep+"','"+rowsep+'\');" class="btn btn-primary d-inline-flex align-items-center shadow-sm me-2 '+g+'"><span class="material-icons">save</span>Ok</a></div></div>'}}}}catch(L){}$("#divTable").html(e),a&&setTimeout(function(){totalOnLoadtstTable()},0);try{parent.AxAfterTableLoad(t)}catch(L){}}function AddTableData(){var e="",t=!0,a="";if($("#fldTable tbody tr").length>0)$("#fldTable tbody tr").each(function(){var l="";$(this).find("td").each(function(){if($(this).find("select").length>0&&void 0!==$(this).find("select").attr("value")){if(void 0!==$(this).find("select").data("ae")&&0==$(this).find("select").data("ae")&&""==$(this).find("select").attr("value"))return callParentNew('showAlertDialog("error",'+$(this).find("select").attr("id")+" cannot be left empty.)","function"),$(this).find("select").focus(),t=!1,!1;if(void 0!==$(this).find("select").data("ad")&&0==$(this).find("select").data("ad")&&""!=$(this).find("select").attr("value")){var e=$(this).find("select").attr("name")+"~"+$(this).find("select").attr("value")+"♠";if(a.indexOf(e)>-1)return callParentNew('showAlertDialog("error",'+$(this).find("select").attr("id")+" duplicate value not allowed.)","function"),$(this).find("select").focus(),t=!1,!1;a+=$(this).find("select").attr("name")+"~"+$(this).find("select").attr("value")+"♠"}l+=$(this).find("select").attr("value")+valuesep}else if($(this).find("input:text").length>0){if(void 0!==$(this).find("input").data("ae")&&0==$(this).find("input").data("ae")&&""==$(this).find("input").attr("value"))return callParentNew('showAlertDialog("error",'+$(this).find("input").attr("id")+" cannot be left empty.)","function"),$(this).find("input").focus(),t=!1,!1;if(void 0!==$(this).find("input").data("ad")&&0==$(this).find("input").data("ad")&&""!=$(this).find("input").attr("value")){var n=$(this).find("input").attr("name")+"~"+$(this).find("input").attr("value")+"♠";if(a.indexOf(n)>-1)return callParentNew('showAlertDialog("error",'+$(this).find("input").attr("id")+" duplicate value not allowed.)","function"),$(this).find("select").focus(),t=!1,!1;a+=$(this).find("input").attr("name")+"~"+$(this).find("input").attr("value")+"♠"}l+=$(this).find("input").attr("value")+valuesep}}),""!=l&&(l=l.substring(0,l.length-1)),e+=l+rowsep});else{var l="";$("#divTable").find("input,select").each(function(){if($(this).is("select")&&void 0!==$(this).attr("value")){if(void 0!==$(this).data("ae")&&0==$(this).data("ae")&&""==$(this).attr("value"))return callParentNew('showAlertDialog("error",'+$(this).attr("name")+" cannot be left empty.)","function"),$(this).find("select").select2("open"),t=!1,!1;l+=$(this).attr("value")+valuesep}else if($(this).is("input")&&"text"==$(this).attr("type")){if(void 0!==$(this).data("ae")&&0==$(this).data("ae")&&""==$(this).attr("value"))return callParentNew('showAlertDialog("error",'+$(this).attr("name")+" cannot be left empty.)","function"),$(this).find("input").focus(),t=!1,!1;l+=$(this).attr("value")+valuesep}}),""!=l&&(l=l.substring(0,l.length-1)),e+=l+rowsep}if(t){isfromSqlExec?(e=e.substring(0,e.length-1),parent._sqlTblValues=e,parent.closeModalDialog()):(e=e.substring(0,e.length-1),$j("#"+thisFldId,doParentOpInIframe("document","rtn","#"+thisFldId)).val(e),UpdateArray(thisFldId,e),parent.CallbackFunctionBootstrap(thisFldId));try{parent.AxAfterAddTableData()}catch(n){}callParentNew("modalIdTableField","id").dispatchEvent(new CustomEvent("close"))}}function ClearTableData(e){$("#"+e+" tbody tr td").each(function(){$(this).find("input:text").val(""),$(this).find("input:text").attr("value",""),$(this).find("select").val(""),$(this).find("select").prop("selected",!1),$(this).find("select").hasClass("tblFromSelect")&&$(this).find("select").find("option").remove()}),setTimeout(function(){totalOnLoadtstTable()},0)}function DeleteTableRows(e){$("#"+e+" tbody tr").each(function(){void 0!==$(this).find(".fgChk:checked").prop("checked")&&$(this).find(".fgChk:checked").prop("checked")&&(1==$("#"+e+" tbody tr").length&&($j(".fgHdrChk").prop("checked",!1),rowObj=$(this).clone()),$(this).remove())}),setTimeout(function(){totalOnLoadtstTable()},0)}function AddTableRows(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"",a=$("#"+e+" tbody tr:last"),l="-1";if(0==a.length?(rowObj.find("input:text").val(""),$("#"+e+" tbody").append(rowObj)):(l=$("#"+e+" tbody tr:last").attr("id"),$(a).clone().insertAfter(a).find("input:text").val("")),$("#"+e+" tbody tr:last").find(".fgChk").prop("checked",!1),$j(".fgHdrChk").prop("checked",!1),$("#"+e+" tbody tr:last").find("select,input,div.autoclear i,div.edit i,div[id^=autoadv],div[id^=autoadv] i").each(function(e,t){var a=$j(this);if(a.hasClass("tblFromSelect")){var n=a.attr("disabled"),r=a.parent("td"),o=a.attr("name"),i=o+"R"+(parseInt(l)+1),s=a.attr("data-id"),d=a.attr("class");d=d.replace(" select2-hidden-accessible"," "),a.siblings("span.select2").remove(),a.remove();var c=void 0!==a.data("ae")&&0==a.data("ae")?" data-ae='false' ":"",u=void 0!==a.data("ad")&&0==a.data("ad")?" data-ad='false' ":"";r.html("<select "+n+c+u+' class="'+d+'" data-control="select2" name='+o+" id="+i+' value="" data-id='+s+' data-placeholder="Select an option" data-allow-clear="true"></select>')}else{if(id=a.attr("data-clk"),id!=undefined)a.attr("data-clk",$j(this).parents(".autoinput-parent").find("input").attr("id"));else{var p=a.attr("name"),f=p+"R"+(parseInt(l)+1);a.attr("id",f),a.removeAttr("value").attr("value","")}}}),$("#"+e+" tbody tr:last").attr("id",(parseInt(l)+1).toString()),""!=t){var n=(parseInt(l)+1).toString(),r=$("#hdnfieldId").val(),o=callParentNew("GetFieldsRowNo("+r+")","function");$(colNames).each(function(e,t){if(""!=colSource[e]){var a=t+"R"+n,l=colSource[e],r=(callParentNew("GetFieldIndex("+l+")","function"),callParentNew("GetDcNo("+l+")","function")),i=o;callParentNew("IsDcGrid("+r+")","function")||(i="000");var s="";""!=l&&(s=$(callParentNew(l+i+"F"+r)).val()),void 0!==s&&""!=s&&$("#"+a).length>0&&$("#"+a).val(s)}})}LoadTableEvents("#divTable"),setTimeout(function(){totalOnLoadtstTable()},0)}function MainBlur(obj,type){var fldInd=colNames.indexOf(obj.attr("name"));if("undefined"!=typeof colVExp[fldInd]&&""!=colVExp[fldInd]){var vExp=colVExp[fldInd].replace(/,/g,"♦"),vRowNo=obj.attr("id").replace(obj.attr("name")+"R",""),indx=$j.inArray(obj.attr("name"),parent.ChangedTblFields),cellVal=String(parent.ChangedTblFieldVals[indx]).split("~");cellVal[vRowNo]=$(obj).val(),parent.ChangedTblFieldVals[indx]=cellVal.join("~");var fResult=callParentNew("Evaluate("+obj.attr("name")+","+vRowNo+","+vExp+",vexpr,table)","function");if("T"!=fResult&&"t"!=fResult&&1!=fResult){var cutMsg=eval(callParent("lcm[52]")),firstChar=fResult.substring(0,1),alertMsg=fResult.substring(1);if("_"!=firstChar){if("?"==firstChar){if(showAlertDialog("error",alertMsg),"input"==type)$(obj).val($(obj).val()),$(obj).attr("value",$(obj).val());else{var ddlValue=$j(obj).val();$(obj).hasClass("tblFromSelect")?(ddlValue=null==ddlValue?"":ddlValue,$(obj).append('<option value="'+ddlValue+'" selected="selected">'+ddlValue+"</option>"),$(obj).attr("value",ddlValue)):($j(obj).attr("selected","selected"),$(obj).attr("value",ddlValue))}return!1}if("*"==firstChar)return showAlertDialog("error",alertMsg),!1;if("MessageSetAxFont"==fResult)return!0;if(confirm(fResult+". "+cutMsg)){if("input"==type)$(obj).val($(obj).val()),$(obj).attr("value",$(obj).val());else{var _ddlValue=$j(obj).val();$(obj).hasClass("tblFromSelect")?(_ddlValue=null==_ddlValue?"":_ddlValue,$(obj).append('<option value="'+_ddlValue+'" selected="selected">'+_ddlValue+"</option>"),$(obj).attr("value",_ddlValue)):($j(obj).attr("selected","selected"),$(obj).attr("value",_ddlValue))}return!1}return!0}showAlertDialog("error",alertMsg)}TableEvalonBlur(indx,vRowNo)}else{if("input"==type)$(obj).val($(obj).val()),$(obj).attr("value",$(obj).val());else{var _ddlValue2=$j(obj).val();$(obj).hasClass("tblFromSelect")?(_ddlValue2=null==_ddlValue2?"":_ddlValue2,$(obj).append('<option value="'+_ddlValue2+'" selected="selected">'+_ddlValue2+"</option>"),$(obj).attr("value",_ddlValue2)):($j(obj).attr("selected","selected"),$(obj).attr("value",_ddlValue2))}var vRowNo=obj.attr("id").replace(obj.attr("name")+"R",""),indx=$j.inArray(obj.attr("name"),parent.ChangedTblFields),cellVal=String(parent.ChangedTblFieldVals[indx]).split("~");cellVal[vRowNo]=$(obj).val(),parent.ChangedTblFieldVals[indx]=cellVal.join("~"),TableEvalonBlur(indx,vRowNo)}Aportion(obj),setTimeout(function(){totalOnLoadtstTable()},0)}function TableEvalonBlur(e,t){if("undefined"!=typeof colfExp[e]&&""==colfExp[e])for(var a=e;a<colfExp.length;a++)if("undefined"!=typeof colfExp[a]&&""!=colfExp[a]){var l=colfExp[a].replace(/,/g,"♦"),n=$("#"+colNames[a]+"R"+t),r=$j.inArray(n.attr("name"),parent.ChangedTblFields),o=String(parent.ChangedTblFieldVals[r]).split("~");o[t]=$(n).val(),parent.ChangedTblFieldVals[r]=o.join("~");var i=callParentNew("Evaluate("+n.attr("name")+","+t+","+l+",expr,table)","function");if(""!=i){if("text"==$(n).attr("type"))$(n).val(i),$(n).attr("value",i);else{var s=i;$j(n).attr("selected","selected"),$(n).attr("value",s)}o[t]=i,parent.ChangedTblFieldVals[r]=o.join("~")}}}function UpdateArray(e,t){for(var a=!1,l=0;l<doParentOpInIframe("ChangedFields","rtn").length;l++){if(doParentOpInIframe("ChangedFields["+l+"]","rtn").toString()==e){"***"==t?(doParentOpInIframe("ChangedFields","rtn").splice(l,1),doParentOpInIframe("ChangedFieldDbRowNo","rtn").splice(l,1),doParentOpInIframe("ChangedFieldValues","rtn").splice(l,1),doParentOpInIframe().ChangedFieldOldValues.splice(l,1)):(doParentOpInIframe("ChangedFieldOldValues["+l+"]","var",doParentOpInIframe("ChangedFieldValues["+l+"]","rtn").toString()),doParentOpInIframe("ChangedFieldDbRowNo["+l+"]","var",doParentOpInIframe("ChangedFieldDbRowNo["+l+"]","rtn")),doParentOpInIframe("ChangedFieldValues["+l+"]","var",t)),a=!0;break}}if(!a&&"***"!=t){var n=e.lastIndexOf("F"),r=e.substring(n-3,n),o=e.substring(n+1),i=callParentNew("GetDbRowNo("+r+","+o+")","function");parent.ChangedFields.push(e),parent.ChangedFieldDbRowNo.push(i),parent.ChangedFieldValues.push(t),parent.ChangedFieldOldValues.push("")}}function CheckSpecialCharsInStr(e){return e=(e=e)!=undefined?(e=(e=(e=(e=e.replace(/&/g,"&amp;")).replace(/</g,"&lt;")).replace(/>/g,"&gt;")).replace(/'/g,"&apos;")).replace(/"/g,"&quot;"):""}function RepSpecialCharsInHTML(e){return e=(e=(e=(e=(e=e.replace(/&amp;/g,"&")).replace(/&lt;/g,"<")).replace(/&gt;/g,">")).replace(/&apos;/g,"'")).replace(/&quot;/g,'"')}function CheckAll(e){$j("input[name=chkItem]:checkbox").each(function(){$j(this).prop("checked",e.checked)})}function ChkHdrCheckbox(e,t){$j(".fgChk:visible").length==$j(".fgChk:checked").length?$j(".fgHdrChk").prop("checked",!0):$j(".fgHdrChk").prop("checked",!1)}function GetTblFldAutoData(thisId,thisfldId){fldAutoData=[];var custData=callParentNew("AxGetCustSelectFldData("+thisfldId+")","function");if(""!=custData){fldAutoList=thisfldId;var JsonData=JSON.parse(custData),fldData=JsonData.pickdata[3].data,aSearch=[];if($(fldData).each(function(e,t){t.i=t.i.replace(/\^\^dq/g,'"'),aSearch.push(t)}),0!=aSearch.length){var result=$.map(aSearch,function(e){return e.i=e.i.replace(/\^\^dq/g,'"'),{id:""==e.v?e.i:e.v,text:e.i}});fldAutoData=result}else{var cutMsg=eval(callParent("lcm[0]"));fldAutoData={results:"",noResults:cutMsg}}}}function Aportion(e){colNames.indexOf(e.attr("name"));var t=e.attr("name"),a=aportionAgainst.indexOf(t);if(a>-1){var l=colNames[a],n=0;$('[name="'+l+'"]').each(function(){n=parseInt(n)+parseInt(""==$(this).val()?0:$(this).val())});var r=$(e).val();if(""!=r){var o=$(e).parents("tr").find("[name='"+l+"']").val(),i=$(e).parents("tr").find("[name='"+l+"']").attr("id");if(parseInt(r)<=parseInt(o)){$($("#"+i)).val(r),$($("#"+i)).attr("value",r);var s=$(e).parents("tr").next("tr").find("[name='"+l+"']").val(),d=$(e).parents("tr").next("tr").find("[name='"+l+"']").attr("id"),c=0;if($('[name="'+l+'"]').each(function(){c=parseInt(c)+parseInt(""==$(this).val()?0:$(this).val())}),""==s&&parseInt(aportionWhatVal[a])>parseInt(r)){var u=0;u=aportionWhatVal[a]==n?aportionWhatVal[a]-parseInt(c):aportionWhatVal[a]-(n+parseInt(r)),$($("#"+d)).val(u),$($("#"+d)).attr("value",u)}else if(""!=s&&parseInt(aportionWhatVal[a])>parseInt(n));}else if(""!=o&&"0"!=o||parseInt(aportionWhatVal[a])==parseInt(n)){if(""!=o&&""==aportionWhatVal[a])$($("#"+i)).val(r),$($("#"+i)).attr("value",r);else if(parseInt(aportionWhatVal[a])!=parseInt(n)){var p=parseInt(aportionWhatVal[a])-parseInt(n),f=$(e).parents("tr").find("[name='"+l+"']").val();r>=(p+=parseInt(f))?($($("#"+i)).val(p),$($("#"+i)).attr("value",p)):($($("#"+i)).val(r),$($("#"+i)).attr("value",r))}}else $($("#"+i)).val(r),$($("#"+i)).attr("value",r)}}}function SqlFillData(){if("true"==isQuery){var e="";try{$.ajax({url:"tsttable.aspx/GetSqlFillData",type:"POST",cache:!1,async:!0,data:JSON.stringify({tstDId:callParentNew("tstDataId"),fldName:$("#hdnfieldId").val()}),dataType:"json",contentType:"application/json",success:function(t){if(""!=t.d){e=JSON.parse(t.d);for(var a=0;a<e.length;a++){var l=e[a];for(var n in l)for(var r in l[n]){var o=r,i=$($("#"+o+"R"+a));0==i.length&&(AddTableRows("fldTable"),i=$($("#"+o+"R"+a)));var s=l[n][r];if("text"==$(i).attr("type"))$(i).val(s),$(i).attr("value",s);else{var d=s;i.hasClass("tblFromSelect")?(d=null==d?"":d,$(i).append('<option value="'+d+'" selected="selected">'+d+"</option>"),$(i).attr("value",d)):($(i).attr("selected","selected"),$(i).attr("value",d))}}}}else e=""},error:function(t){e=""}})}catch(d){}}else if("sqlDescr"==isQuery&&""!=QueryData){e=JSON.parse(QueryData);for(var t=0;t<e.length;t++){var a=e[t];for(var l in a)for(var n in a[l]){var r=n,o=$($("#"+r+"R"+t));0==o.length&&(AddTableRows("fldTable"),o=$($("#"+r+"R"+t)));var i=a[l][n];if("text"==$(o).attr("type"))$(o).val(i),$(o).attr("value",i);else{var s=i;o.hasClass("tblFromSelect")?(s=null==s?"":s,$(o).append('<option value="'+s+'" selected="selected">'+s+"</option>"),$(o).attr("value",s)):($(o).attr("selected","selected"),$(o).attr("value",s))}}}}}function GetstrTableJson(e){var t="";try{$.ajax({url:"tsttable.aspx/GetstrTableJson",type:"POST",cache:!1,async:!1,data:JSON.stringify({descrName:e,tstDId:callParentNew("tstDataId"),fldName:$("#hdnfieldId").val()}),dataType:"json",contentType:"application/json",success:function(e){if(""!=e.d){var a=e.d;QueryData=a.split("♥")[1],""!=(a=a.split("♥")[0])&&(t=a)}else t=""},error:function(e){t=""}})}catch(a){}return t}function GetAutoCompData(e,t,a,l){var n="";if(arrRefreshDcs.length>0)for(var r=0;r<arrRefreshDcs.length;r++){var o=arrRefreshDcs[r].split(":");n=o[1].replace("dc","")+","+o[0].replace("dc","")}t=CheckSpecialCharsInStr(t);var i=callParentNew("GetFieldsDcNo("+e+")","function");AxActiveRowNo=parseInt(callParentNew("GetFieldsRowNo("+e+")","function"),10),AxActiveRowNo=callParentNew("GetDbRowNo("+AxActiveRowNo+","+i+")","function");var s=AxActiveRowNo,d="";""!=AxActivePRow&&""!=AxActivePDc&&(d=AxActivePDc+"♠"+AxActivePRow);return a.toString()+"~"+l.toString()+"~"+i+"~"+s+"~"+d+"~~"+n}function GetDBProcTableJson(e){var t="";try{var a=$("#hdnfieldId").val().substring(0,$("#hdnfieldId").val().lastIndexOf("F")-3),l=callParentNew("GetFieldsRowNo("+$("#hdnfieldId").val()+")","function"),n=callParentNew("GetDcNo("+a+")","function"),r=callParentNew("GetDbRowNo("+l+","+n+")","function");$.ajax({url:"tsttable.aspx/GetDBProcTableJson",type:"POST",cache:!1,async:!1,data:JSON.stringify({procName:e,tstDId:callParentNew("tstDataId"),fldName:$("#hdnfieldId").val(),ChangedFields:parent.ChangedFields,ChangedFieldDbRowNo:parent.ChangedFieldDbRowNo,ChangedFieldValues:parent.ChangedFieldValues,DeletedDCRows:parent.DeletedDCRows,tfldDc:n,tfldRowNo:r}),dataType:"json",contentType:"application/json",success:function(e){if(""!=e.d){var a=e.d;QueryData=a.split("♥")[1],""!=(a=a.split("♥")[0])&&(t=a)}else t=""},error:function(e){t=""}})}catch(o){}return t}function GetSourceParamValue(e){var t="",a=void 0===e.parents("tr").attr("id")?"0":e.parents("tr").attr("id"),l=e.attr("name");return $(colNames).each(function(e,n){if(""!=colSource[e]&&l!=n){var r=n+"R"+a;$("#"+r).is("select")&&void 0!==$("#"+r).attr("value")&&""!=$("#"+r).attr("value")?t+=""==t?colSource[e]+":"+$("#"+r).attr("value"):"♠"+colSource[e]+":"+$("#"+r).attr("value"):$("#"+r).is("input")&&"text"==$("#"+r).attr("type")&&""!=$("#"+r).attr("value")&&(t+=""==t?colSource[e]+":"+$("#"+r).attr("value"):"♠"+colSource[e]+":"+$("#"+r).attr("value"))}}),t}function isEmptyOrBlankArray(e){return 0===e.length||e.every(function(e){return""===e.trim()})}function totalOnLoadtstTable(){isEmptyOrBlankArray(tblFldFTot)||colNames.forEach(function(e){totalFooterInTable($("#fldTable").find("[name='".concat(e,"']")))})}function totalFooterInTable(e){try{var t=colNames.indexOf(e.attr("name"));if(void 0!==tblFldFTot&&t>-1&&""!=tblFldFTot[t]){for(var a,l=tblFldFTot[t],n=/:(\w+)/g,r=[];null!==(a=n.exec(l));)r.push(a[1]);var o=[];r.forEach(function(t){var a=!1;$(e).parents("table").find("thead tr th").each(function(e){if(0!=e&&colNames[e-1]===t.toLowerCase())return o.push(e),a=!0,!1}),a||o.push(-1)});var i=new Array(o.length).fill(0);$(e).parents("table").find("tbody tr").each(function(){var e=this;o.forEach(function(t,a){if(-1!=t){var l=$(e).find("td:eq(".concat(t,") input,td:eq(").concat(t,") select")).val().trim(),n=parseFloat(l.replace(/[^0-9.-]/g,""));if(!isNaN(n)){var r=n.toString().split(".")[1];if(void 0!==r&&r.length>0){var o=r.length;i[a]+=n,i[a]=RoundOff(i[a],o)}else i[a]+=n}}})}),r.forEach(function(e,t){var a=i[t];try{var n=a.toString().split(".")[1];if(void 0!==n&&n.length>0){var r=n.length;a=CommaFormatted(fixit(i[t],r))}else a=CommaFormatted(i[t])}catch(u){}var o=colNames.findIndex(function(t){return t.toLowerCase()===e.toLowerCase()});l=l.replace(":"+e,a),0===parent.$("#modalIdTableField .modal-footer .dvfTotal").length&&parent.$("#modalIdTableField .modal-footer").prepend('<span class="dvfTotal ms-0 me-auto"></span>');var s=parent.$("#modalIdTableField .modal-footer .dvfTotal"),d=s.find("#dvfgTotal".concat(o));d.length>0?d.text(l):s.append('<span id="dvfgTotal'.concat(o,'" style="font-weight:600;display:inline-block;margin-right:10px;">').concat(l,"</span>"));var c=s.find("span[id^='dvfgTotal']").get();c.sort(function(e,t){return parseInt(e.id.replace("dvfgTotal",""),10)-parseInt(t.id.replace("dvfgTotal",""),10)}),s.append(c)})}else-1==t&&parent.$("#modalIdTableField .modal-footer .dvfTotal").length>0&&parent.$("#modalIdTableField .modal-footer .dvfTotal").remove()}catch(s){}}