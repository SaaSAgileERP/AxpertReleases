/*https://web.agile-labs.com/minZIP/*//*version=3.9.1*/function _createForOfIteratorHelper(a,e){var n="undefined"!=typeof Symbol&&a[Symbol.iterator]||a["@@iterator"];if(!n){if(Array.isArray(a)||(n=_unsupportedIterableToArray(a))||e&&a&&"number"==typeof a.length){n&&(a=n);var t=0,r=function(){};return{s:r,n:function(){return t>=a.length?{done:!0}:{done:!1,value:a[t++]}},e:function(a){throw a},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,d=!1;return{s:function(){n=n.call(a)},n:function(){var a=n.next();return i=a.done,a},e:function(a){d=!0,o=a},f:function(){try{i||null==n["return"]||n["return"]()}finally{if(d)throw o}}}}function _toConsumableArray(a){return _arrayWithoutHoles(a)||_iterableToArray(a)||_unsupportedIterableToArray(a)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(a,e){if(a){if("string"==typeof a)return _arrayLikeToArray(a,e);var n=Object.prototype.toString.call(a).slice(8,-1);return"Object"===n&&a.constructor&&(n=a.constructor.name),"Map"===n||"Set"===n?Array.from(a):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(a,e):void 0}}function _iterableToArray(a){if("undefined"!=typeof Symbol&&null!=a[Symbol.iterator]||null!=a["@@iterator"])return Array.from(a)}function _arrayWithoutHoles(a){if(Array.isArray(a))return _arrayLikeToArray(a)}function _arrayLikeToArray(a,e){(null==e||e>a.length)&&(e=a.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=a[n];return t}function ownKeys(a,e){var n=Object.keys(a);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(a);e&&(t=t.filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable})),n.push.apply(n,t)}return n}function _objectSpread(a){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(Object(n),!0).forEach(function(e){_defineProperty(a,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(e){Object.defineProperty(a,e,Object.getOwnPropertyDescriptor(n,e))})}return a}function _defineProperty(a,e,n){return e in a?Object.defineProperty(a,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):a[e]=n,a}function _typeof(a){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a})(a)}!function($,win){function axpertUI_dashboard(){return options={loader:{div:".page-loader",subDiv:".loader-box-wrapper",textDiv:".page-loader-text",parent:".page-loading",stayClass:"stay-page-loading",inAnimationClass:"animation animation-fade-in",outAnimationClass:"animation animation-fade-out",radialGradientClass:"bg-radial-gradient",loaderWrapClass:"bg-white p-20 shadow rounded"},dashboardcardsPage:{setCards:!1,cards:[],totalColumns:12,designChanged:!1,design:[],enableMasonry:!1,html:{wrapper:'\n                    <div class="widget-main">\n                        <div class="container-fluid">\n                            <div class="kpi-main">\n                                <div class="row innerCardsPageWrapper">\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                    ',loader:'\n                    <div class="demo-preloader">\n                        <div class="preloader pl-size-sm">\n                            <div class="spinner-layer">\n                                <div class="circle-clipper left">\n                                    <div class="circle"></div>\n                                </div>\n                                <div class="circle-clipper right">\n                                    <div class="circle"></div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                    ',kpi:'\n                    <div class="col-xs-12 col-sm-12 col-md-3 col-lg-3 mt-3 widgetWrapper kpiWrapper">\n                        <div class="card rounded-1 shadow-sm h-100">\n                            \x3c!--begin::Card header--\x3e\n                            <div class="card-header border-0">\n                                \x3c!--begin::Card title--\x3e\n                                <div class="card-title">\n                                    <div class="d-none mainIcon w-100--- me-2">\n                                        <img alt="Icon" src="" class="mh-35px mw-35px" />\n                                    </div>\n                                    <div class="symbol symbol-35px me-2 mainIcon">\n                                        <div class="symbol-label">\n                                            <span class="material-icons material-icons-style">\n                                                <iconContent></iconContent>\n                                            </span>\n                                        </div>\n                                    </div>\n                                    <h4 class="fw-bolder mainHeading">\n                                        <headerContent></headerContent>\n                                    </h4>\n                                </div>\n                                \x3c!--end::Card title--\x3e\n                                \x3c!--begin::Card toolbar--\x3e\n                                <div class="card-toolbar d-none">\n                                    <a href="javascript:void(0);" class="btn btn-sm btn-flex btn-light-primary">\n                                        <statusContent></statusContent>\n                                    </a>\n                                </div>\n                                \x3c!--end::Card toolbar--\x3e\n                            </div>\n                            \x3c!--end::Card header--\x3e\n                            \x3c!--begin::Card body--\x3e\n                            <div class="card-body heightControl pt-0">\n                                <div class="fw-bolder fs-2">\n                                    <div class="">\n                                        <bodyContent>No Data Found</bodyContent>\n                                    </div>\n                                </div>\n                            </div>\n                            \x3c!--end::Card body--\x3e\n                            <div class="card-footer border-0 d-none">\n                                <div class="fs-7 fw-normal text-muted">\n                                    <footerContent></footerContent>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                    ',chart:'\n                    <div class="col-xs-12 col-sm-12 col-md-4 col-lg-4 mt-3 widgetWrapper chartWrapper">\n                        <div class="card rounded-1 h-100 shadow-sm">\n                            <div class="card-header border-0---">\n                                <div class="card-title">\n                                    <div class="d-none mainIcon w-100--- me-2">\n                                        <img alt="Icon" src="" class="mh-35px mw-35px" />\n                                    </div>\n                                    <div class="symbol symbol-35px me-2 mainIcon">\n                                        <div class="symbol-label">\n                                            <span class="material-icons material-icons-style">\n                                                <iconContent></iconContent>\n                                            </span>\n                                        </div>\n                                    </div>\n                                    <h4 class="fw-bolder mainHeading">\n                                        <headerContent></headerContent>\n                                    </h4>\n                                </div>\n                                <div class="card-toolbar">\n                                    <a href="javascript:void(0);" class="d-none btn btn-sm btn-icon btn-icon-primary btn-active-light-primary me-n3" data-kt-menu-trigger="click" data-kt-menu-placement="bottom-end" data-kt-menu-flip="top-end">\n                                        <span class="material-icons material-icons-style">\n                                            more_vert\n                                        </span>\n                                    </a>\n                                    <div class="menu menu-sub menu-sub-dropdown menu-column menu-rounded menu-gray-600 menu-state-bg-light-primary fw-bolder w-200px rounded-1" data-kt-menu="true" style="">\n                                        <div class="menu-item px-3">\n                                            <div class="menu-content fs-6 text-dark fw-boldest px-3 py-4">Quick Actions</div>\n                                        </div>\n                                        <div class="separator mb-3 opacity-75"></div>\n                                        <div class="menu-item px-3">\n                                            <a href="javascript:void(0);" class="menu-link px-3">New Ticket</a>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                            <div class="card-body min-h-300px heightControl pt-0---">\n                                <bodyContent>No Data Found</bodyContent>\n                            </div>\n                        </div>\n                    </div>\n                    ',list:'\n                    <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6 mt-3 widgetWrapper listWrapper">\n                        <div class="card rounded-1 h-100 shadow-sm">\n                            <div class="card-header border-0---">\n                                <div class="card-title">\n                                    <div class="d-none mainIcon w-100--- me-2">\n                                        <img alt="Icon" src="" class="mh-35px mw-35px" />\n                                    </div>\n                                    <div class="symbol symbol-35px me-2 mainIcon">\n                                        <div class="symbol-label">\n                                            <span class="material-icons material-icons-style">\n                                                <iconContent></iconContent>\n                                            </span>\n                                        </div>\n                                    </div>\n                                    <h4 class="fw-bolder mainHeading">\n                                        <headerContent></headerContent>\n                                    </h4>\n                                </div>\n                            </div>\n                            <div class="card-body min-h-300px h-300px heightControl pt-0---">\n                                <bodyContent>No Data Found</bodyContent>\n                            </div>\n                        </div>\n                    </div>\n                    ',menu:'\n                    <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6 mt-3 widgetWrapper menuWrapper">\n                        <div class="card rounded-1 h-100 shadow-sm">\n                            <div class="card-header border-0---">\n                                <div class="card-title">\n                                    <div class="d-none mainIcon w-100--- me-2">\n                                        <img alt="Icon" src="" class="mh-35px mw-35px" />\n                                    </div>\n                                    <div class="symbol symbol-35px me-2 mainIcon">\n                                        <div class="symbol-label">\n                                            <span class="material-icons material-icons-style">\n                                                <iconContent></iconContent>\n                                            </span>\n                                        </div>\n                                    </div>\n                                    <h4 class="fw-bolder mainHeading">\n                                        <headerContent></headerContent>\n                                    </h4>\n                                </div>\n                            </div>\n                            <div class="card-body heightControl pt-0---">\n                                <descriptionContent>\n                                    <div class="description pb-5" title="menu">\n                                        No Description\n                                    </div>\n                                </descriptionContent>\n                                <bodyContent>No Data Found</bodyContent>\n                            </div>\n                        </div>\n                    </div>\n                    ',"modern menu":'\n                    <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 widgetWrapper modernMenuWrapper">\n                        <modernMenuContent></modernMenuContent>\n                    </div>\n                    ',modernMenuContent:'\n                    <div class="col-lg-2 col-md-2 col-sm-12 col-xs-12 mt-3">\n                        <div class="card rounded-1 h-100 shadow-sm">\n                            <div class="card-body cursor-pointer">\n                                <div class="text text-center header---">\n                                    <iconContent></iconContent>\n                                    <span class="fw-bolder fs-5 modernMenuName">\n                                        <bodyContent></bodyContent>\n                                    </span>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                    ',"image card":'\n                    <div class="col-xs-12 col-sm-12 col-md-4 col-lg-4 mt-3 widgetWrapper imageWrapper">\n                        <div class="card rounded-1 h-100 shadow-sm">\n                            <div class="h-400px heightControl">\n                                <imageContent></imageContent>\n                            </div>\n\n                            <div class="card-img-overlay p-0 h-100" style="background: rgba(0,0,0,.4);">\n                                <div class="card rounded-1 bg-transparent h-100">\n                                    <div class="card-header bg-transparent border-0">\n                                        <div class="card-title d-flex">\n                                            <div class="d-none mainIcon w-100--- me-2">\n                                                <img alt="Icon" src="" class="mh-35px mw-35px" />\n                                            </div>\n                                            <div class="symbol symbol-35px me-2 mainIcon">\n                                                <div class="symbol-label">\n                                                    <span class="material-icons material-icons-style">\n                                                        <iconContent></iconContent>\n                                                    </span>\n                                                </div>\n                                            </div>\n                                            <h4 class="mt-1 fs-1 fw-bolder text-white mainHeading">\n                                                <headerContent></headerContent>\n                                            </h4>\n                                        </div>\n                                    </div>\n\n                                    <div class="card-body pt-0">\n                                        <div class="fs-3">\n                                            <div class="text-white">\n                                                <bodyContent>No Data Found</bodyContent>\n                                            </div>\n                                            \n                                        </div>\n                                    </div>\n\n                                    <div class="card-footer bg-transparent border-0 d-none">\n                                        <div class="fs-7 fw-normal text-white text-muted">\n                                            <footerContent></footerContent>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                            </div>\n                    </div>\n                    ',calendar:'\n                    <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6 mt-3 widgetWrapper calendarWrapper">\n                        <div class="card rounded-1 h-100 shadow-sm">\n                            <div class="card-header border-0---">\n                                <div class="card-title">\n                                    <div class="d-none mainIcon w-100--- me-2">\n                                        <img alt="Icon" src="" class="mh-35px mw-35px" />\n                                    </div>\n                                    <div class="symbol symbol-35px me-2 mainIcon">\n                                        <div class="symbol-label">\n                                            <span class="material-icons material-icons-style">\n                                                <iconContent></iconContent>\n                                            </span>\n                                        </div>\n                                    </div>\n                                    <h4 class="fw-bolder mainHeading">\n                                        <headerContent></headerContent>\n                                    </h4>\n                                </div>\n                                <div class="d-none card-toolbar">\n                                    <a href="javascript:void(0);" class="btn btn-sm btn-icon btn-icon-primary btn-active-light-primary me-n3" data-kt-menu-trigger="click" data-kt-menu-placement="bottom-end" data-kt-menu-flip="top-end">\n                                        <span class="material-icons material-icons-style">\n                                            more_vert\n                                        </span>\n                                    </a>\n                                    <div class="menu menu-sub menu-sub-dropdown menu-column menu-rounded menu-gray-600 menu-state-bg-light-primary fw-bolder w-200px" data-kt-menu="true" style="">\n                                        <div class="menu-item px-3 rounded-1">\n                                            <div class="menu-content fs-6 text-dark fw-boldest px-3 py-4">Quick Actions</div>\n                                        </div>\n                                        <div class="separator mb-3 opacity-75"></div>\n                                    </div>\n                                </div>\n                            </div>\n                            <div class="card-body min-h-600px h-600px heightControl pt-0---">\n                                <bodyContent>No Data Found</bodyContent>\n                            </div>\n                            <div class="card-footer py-2 border-0--- d-flex justify-content-evenly d-none">\n                                <div class="fs-7 fw-normal text-white text-muted">\n                                    <footerContent></footerContent>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                    ',html:'\n                    <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6 mt-3 widgetWrapper htmlDomWrapper">\n                        <div class="card rounded-1 h-100 shadow-sm">\n                            <div class="d-none card-header border-0---">\n                                <div class="card-title">\n                                    <div class="d-none mainIcon w-100--- me-2">\n                                        <img alt="Icon" src="" class="mh-35px mw-35px" />\n                                    </div>\n                                    <div class="symbol symbol-35px me-2 mainIcon">\n                                        <div class="symbol-label">\n                                            <span class="material-icons material-icons-style">\n                                                <iconContent></iconContent>\n                                            </span>\n                                        </div>\n                                    </div>\n                                    <h4 class="fw-bolder mainHeading">\n                                        <headerContent></headerContent>\n                                    </h4>\n                                </div>\n                            </div>\n                            <div class="card-body p-0 min-h-300px heightControl pt-0---">\n                                <bodyContent>No Data Found</bodyContent>\n                            </div>\n                        </div>\n                    </div>\n                    ',"options card":'\n                    <div class="col-xs-12 col-sm-12 col-md-3 col-lg-3 mt-3 widgetWrapper optionCardWrapper">\n                        <div class="card rounded-1 shadow-sm h-100">\n                            \x3c!--begin::Card header--\x3e\n                            <div class="card-header border-0">\n                                \x3c!--begin::Card title--\x3e\n                                <div class="card-title flex-wrap">\n                                    <div class="d-none mainIcon w-100 me-2 pb-4">\n                                        <img alt="Icon" src="" class="mh-75px mw-75px" />\n                                    </div>\n                                    <div class="symbol symbol-75px me-2 mainIcon w-100 pb-4">\n                                        \n                                        <div class="symbol-label bg-transparent">\n                                            <span class="material-icons material-icons-style material-icons-3x">\n                                                <iconContent></iconContent>\n                                            </span>\n                                        </div>\n                                    </div>\n                                    <h4 class="fw-bolder mainHeading pb-4">\n                                        <headerContent></headerContent>\n                                    </h4>\n                                </div>\n                                \x3c!--end::Card title--\x3e\n                                \x3c!--begin::Card toolbar--\x3e\n                                <div class="card-toolbar d-none align-items-start pt-3 position-absolute top-0 end-0 me-7">\n                                    <a href="javascript:void(0);" class="d-none--- btn btn-sm btn-icon btn-icon-gray-600 btn-active-light-primary me-n3" data-kt-menu-trigger="click" data-kt-menu-placement="bottom-end" data-kt-menu-flip="top-end">\n                                        <span class="material-icons material-icons-style">\n                                            more_vert\n                                        </span>\n                                    </a>\n                                    <div class="menu menu-sub menu-sub-dropdown menu-column menu-rounded menu-gray-600 menu-state-bg-light-primary fw-bolder min-w-300px mw-500px w-auto rounded-1" data-kt-menu="true" style="">\n                                        \x3c!--<div class="menu-item p-3">\n                                            <div class="d-flex flex-stack">\n                                                <div class="d-flex align-items-center">\n                                                    <span class="material-icons material-icons-style px-3">\n                                                        all_inclusive\n                                                    </span>\n                                                    <div class="d-flex flex-column">\n                                                        <div class="fs-6 fw-semibold text-muted">Title</div>\n                                                        <a href="#" class="fs-5 text-dark text-hover-primary fw-bold">Body</a>\n                                                        <div class="fs-6 fw-semibold text-muted">Footer</div>                                                        \n                                                    </div>\n                                                </div>\n                                            </div>\n                                        </div>--\x3e\n                                        <dropdownInfo></dropdownInfo>\n                                        <div class="separator mb-3 opacity-75"></div>\n                                        <div class="menu-item px-3">\n                                            <div class="flex-wrap pt-0 pb-2">\n                                                \x3c!--<a href="javascript:void(0);" onclick="alert();" class="btn btn-sm btn-light-primary btn-active-primary my-1 me-2">View Role</a>--\x3e\n                                                <dropdownOptions></dropdownOptions>\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n                                \x3c!--end::Card toolbar--\x3e\n                            </div>\n                            \x3c!--end::Card header--\x3e\n                        </div>\n                    </div>',masonryWidth:'\n                    <div class="grid-sizer col-lg-1 col-md-1 col-sm-12 col-xs-12"></div><div class="clearfix"></div>\n                    ',"break":'\n                    <div class="clearfix"></div>\n                    '}},navigation:{backButton:{div:".appBackBtn"}}},dashboardcardsPage={activate:function(a){var e=this;"loadhomepage"==a?(e.options.cards=e._refreshData()||e.options.cards,e.options=e.options):e.options=a||e.options,e.currentColumnWidth=0,e.firstTime=!0,e._checkSetCardsAndInit(),e._showCardsFrame(e.options.setCards);try{e.options.setCards&&(e._injectCustomScript(),e._sortCardsObject(),e._drawCardsLayout()),delete e.currentColumnWidth}catch(n){}try{$("#middle1",parent.document).attr("src").indexOf("&edit=t")>-1&&setTimeout(function(){e.editSaveCardDesignToggle()},0)}catch(n){}e.firstTime=!1},_refreshData:function(a){arguments.length>1&&arguments[1]!==undefined&&arguments[1];var e="";return $.ajax({url:"mainnew.aspx/GetCardsWithDataWS",type:"POST",cache:!1,async:!1,data:JSON.stringify({isHomePage:!1,refreshData:!1}),dataType:"json",contentType:"application/json",success:function(a){if(a&&a.d)try{e=(JSON.parse(""!==a.d?a.d:"[]",function(a,e){try{return"object"===_typeof(e)||isNaN(e)||""===e.toString().trim()?e:"string"==typeof e&&(e.startsWith("0")||e.startsWith("-"))?parseFloat(e,10):JSON.parse(e)}catch(n){return e}})||[]).map(function(a){return _.mapKeys(a,function(a,e){return e.toString().toLowerCase()})})}catch(n){}},error:function(a){}}),e},_checkSetCardsAndInit:function(){this.options.cards.length>0||$(this.options.staging.cardsFrame.editSaveButton).addClass("d-none")},_showCardsFrame:function(a){var e=this;setTimeout(function(){a&&e.options.setCards?($(e.options.staging.iframes).addClass("d-none"),$(e.options.staging.cardsFrame.div).removeClass("d-none"),e.editSaveCardDesignToggle(!0)):($(e.options.staging.iframes).removeClass("d-none"),$(e.options.staging.cardsFrame.div).addClass("d-none"))},0),e.options.setCards||$(e.options.staging.cardsFrame.divControl).addClass("d-none")},editSaveCardDesignToggle:function(){var a=arguments.length>0&&arguments[0]!==undefined&&arguments[0],e=$(this.options.staging.cardsFrame.cardsDesigner).hasClass("d-none");if($(e&&this.options.staging.cardsFrame.div).hasClass("d-none")&&($(this.options.staging.iframes).addClass("d-none"),$(this.options.staging.cardsFrame.div).removeClass("d-none")),!a&&e)$(this.options.staging.cardsFrame.cardsDiv).addClass("d-none"),$(this.options.staging.cardsFrame.cardsDesigner).removeClass("d-none"),$(this.options.staging.cardsFrame.cardsDesignerToolbar).removeClass("d-none"),$(this.options.staging.cardsFrame.editSaveButton).removeClass("btn-default").addClass("btn-primary"),$(this.options.staging.cardsFrame.editSaveButton+" "+this.options.staging.cardsFrame.icon).text("save");else if($(this.options.staging.cardsFrame.cardsDiv).removeClass("d-none"),$(this.options.staging.cardsFrame.cardsDesigner).addClass("d-none"),$(this.options.staging.cardsFrame.cardsDesignerToolbar).addClass("d-none"),$(this.options.staging.cardsFrame.editSaveButton).addClass("btn-default").removeClass("btn-primary"),$(this.options.staging.cardsFrame.editSaveButton+" "+this.options.staging.cardsFrame.icon).text("edit"),!a&&this.options.designChanged)if(this.options.design=this._generateCardsDesign(),"true"==(saveMsg=this._saveCardDesign()))this.options.designChanged=!1,showAlertDialog("success","Cards Design Saved Successfully"),parent.LoadIframe("processflow.aspx?dashboard=t");else{try{saveMsg=JSON.parse(saveMsg).error.msg}catch(n){}showAlertDialog("error",saveMsg),"Session Authentication failed..."==saveMsg&&setTimeout(function(){parent.window.location.href="../aspx/sess.aspx"},1e3)}else this.options.designChanged},_generateCardsDesign:function(){return $("".concat(this.options.staging.cardsFrame.cardsDesigner," li input:checkbox")).map(function(a,e){return{axp_cardsid:$(e).data("cardId"),visible:$(e).prop("checked"),orderno:a+1}}).toArray()},_saveCardDesign:function(){var a="";return $.ajax({url:"processflow.aspx/saveCardsDesign",type:"POST",cache:!1,async:!1,data:JSON.stringify({design:JSON.stringify(this.options.design)}),dataType:"json",contentType:"application/json",success:function(e){e&&e.d&&(a=e.d)},error:function(a){}}),a},_injectCustomScript:function(){if("undefined"!=typeof localStorage){var a=top.window.location.href.toLowerCase().substring("0",top.window.location.href.indexOf("/aspx/")),e=localStorage["customCardExist-"+a];if(void 0!==e&&null!=e&&(e=e.replace(/[^a-zA-Z0-9_\-\/]/g,"")),e&&"false"!=e){var n=localStorage["projInfo-"+a]||"";void 0!==n&&null!=n&&(n=n.replace(/[^a-zA-Z0-9_\-\/]/g,"")),loadAndCall({files:{js:["/".concat(n,"/customCard.js?v=").concat(e)]},callBack:function(){}})}}},_sortCardsObject:function(a){this.options.cards.length>0&&(this.options.cards=_.values(_.merge(_.keyBy(this.options.cards,"axp_cardsid"),_.keyBy(this.options.design,"axp_cardsid"))).map(function(a){return!!a.cardtype&&("undefined"!=typeof a.visible&&delete a.visible,a)}).filter(function(a){return a})),this.options.cards=_.sortBy(this.options.cards,function(a){return parseInt(a.orderno)})},_drawCardsLayout:function(){var a=this;$(a.options.staging.cardsFrame.div+" "+a.options.staging.cardsFrame.cardsDiv).html(""),$(a.options.staging.cardsFrame.div+" "+a.options.staging.cardsFrame.cardsDesigner).html(""),a.options.enableMasonry&&$(a.options.staging.cardsFrame.div+" "+a.options.staging.cardsFrame.cardsDiv).html(a.options.html.masonryWidth);try{var e;null===(e=callParentNew("updateAppLinkObj"))||void 0===e||e("loadhomepage")}catch(n){}$.axpertUI_dashboard.dashboardGrouping.init(),$.axpertUI_dashboard.dashboardGrouping.groupingVars.cardsJson=a.options.cards,$.axpertUI_dashboard.dashboardGrouping.groupingVars.groupJson&&$.axpertUI_dashboard.dashboardGrouping.groupingVars.groupJson.length>0&&$.axpertUI_dashboard.dashboardGrouping.createGroupAccordions($(a.options.staging.cardsFrame.cardsDiv)),a.options.cards.forEach(function(e,t){var r,o=e.cardtype;if("custom plugin"==(null===(r=o)||void 0===r?void 0:r.toLowerCase())&&(o="html",e.cardtype="html"),o){if(-1==["chart","kpi","list","menu","modern menu","image card","calendar","html","options card"].indexOf(o))return;var i=a._getCardData(e),d=e.axp_cardsid,s=a.options.design.filter(function(a){return a.axp_cardsid==d})[0],c=!s||"undefined"==typeof s.visible||JSON.parse(s.visible);if($(a.options.staging.cardsFrame.cardsDesigner).append('\n                        <li class="d-flex list-group-item ui-state-default">\n                            <span class="material-icons dragIcon cursor-pointer my-auto">drag_indicator</span>\n\n                            <div class="agform form-check form-check-custom form-check-solid px-1 align-self-end">\n                                <input id="chkBox'.concat(d,'" class="showHideChkBox form-check-input h-20px w-20px" type="checkbox" ').concat(c?'checked="checked"':"",' data-card-id="').concat(d,'" />\n                                <label class="form-check-label form-label fw-boldest my-2" for="chkBox').concat(d,'" >\n                                    <span class="dragName">').concat(e.cardname," (").concat(o,")</span>\n                                </label>\n                            </div>\n                        </li>\n                        ")),!c)return c;var l;l=a._formatOutput(i);var p=$(a.options.html[o]).attr("card-index",t).data("card-index",t),u=$.axpertUI_dashboard.dashboardGrouping.getGroupNameByCardId(d)||"";switch(""!=u?($("".concat(a.options.staging.cardsFrame.cardsDiv,' .group-container[data-groupname="').concat(u,'"]')).append(p),$('[data-groupname="'.concat(u,'"]')).closest(".group-accordion").removeClass("d-none")):$(a.options.staging.cardsFrame.cardsDiv).append(p),o){case"kpi":if(a._addCardHeight(p,e,""),a._addCardWidth(p,e,"3"),a._addCardIcon(p,e),a._addCardHeader(p,e),"string"!=typeof i&&i.length>0)try{a._setKpiInfo(p,i,l)}catch(n){}a._addCardBackground(p,e);break;case"image card":a._addCardHeight(p,e,""),a._addCardWidth(p,e,"4"),a._addCardIcon(p,e),a._addCardHeader(p,e);try{a._setImageCardInfo(p,i,e)}catch(n){}a._addCardBackground(p,e);break;case"chart":a._addCardHeight(p,e,""),a._addCardWidth(p,e,"4"),a._addCardIcon(p,e),a._addCardHeader(p,e),"string"!=typeof i&&i.length>0&&setTimeout(function(){var t=p.find("bodyContent").parent();try{AxPlotHighChartWidgets(e.charttype,t,l.rows,l.metaData,a._getChartJsonProps(e,"attributes")||{},a._getChartJsonProps(e,"attributes.enableSlick")||!1),setTimeout(function(){t.find(".highcharts-button.highcharts-contextbutton, .highcharts-button.highcharts-contextbutton *").hide()},0)}catch(n){}},0);break;case"list":a._addCardHeight(p,e,""),a._addCardWidth(p,e,"6"),a._addCardIcon(p,e),a._addCardHeader(p,e),"string"!=typeof i&&i.length>0&&setTimeout(function(){try{a._generateDatatable(p.find("bodyContent").parent(),e,i,l),a._addCardBackground(p,e)}catch(n){}},0);break;case"menu":a._addCardHeight(p,e,""),a._addCardWidth(p,e,"6"),a._addCardIcon(p,e),a._addCardHeader(p,e);try{a._setMenuInfo(p,i,e)}catch(n){}a._addCardBackground(p,e);break;case"modern menu":a._addCardWidth(p,_objectSpread(_objectSpread({},e),{},{width:"col-md-12"}),"12");try{a._setModernMenuInfo(p,i,e)}catch(n){}break;case"calendar":a._addCardWidth(p,e,"12"),a._addCardHeight(p,e,""),a._addCardIcon(p,e),a._addCardHeader(p,e);try{a._setCalendar(p,i,e)}catch(n){}break;case"html":a._addCardHeight(p,e,""),a._addCardWidth(p,e,"4"),a._addCardIcon(p,e),a._addCardHeader(p,e);try{a._setHtmlData(p,e)}catch(n){}a._addCardBackground(p,e);break;case"options card":if(a._addCardHeight(p,e,""),a._addCardWidth(p,e,"3"),a._addCardIcon(p,e),a._addCardHeader(p,e),"string"!=typeof i&&i.length>0)try{a._setOptionsCardInfo(p,i,e)}catch(n){}a._addCardBackground(p,e)}}}),a._cardsWidthPostProcessor($(a.options.staging.cardsFrame.cardsDiv)),a._registerPlugins()},_getCardData:function(a){var e=a.carddata||"";if("undefined"==typeof e.length)e=[e];else try{e=JSON.parse(e)}catch(n){}return"html"==a.cardtype&&(a.html_editor_card=Handlebars.compile(a.html_editor_card)(a),this.cardsData||(this.cardsData={}),this.cardsData[a.cardname]=e),e},_addCardIcon:function(a,e){var n=a.find("iconContent").parents(".mainIcon"),t=n.prev(".mainIcon"),r=e.cardicon&&"*"!=e.cardicon?e.cardicon.toString():"";r?0==r.toLowerCase().indexOf("http:")||0==r.toLowerCase().indexOf("https:")?(t.find("img").attr("src",r),t.removeClass("d-none"),t.addClass("iconAdded"),n.addClass("d-none")):(a.find("iconContent").replaceWith(r),n.addClass("iconAdded"),t.addClass("d-none")):(n.addClass("d-none"),t.addClass("d-none"))},_addCardHeader:function(a,e){a.find(".mainHeading").attr("title",e.cardname||"").find("headerContent").replaceWith(e.cardname||"")},_addCardBackground:function(a,e){a.find(".card-body a:not(.dropdown a)").addClass("border-bottom"),e.axpfile_imgcard&&"image card"==e.cardtype&&a.find("imageContent").replaceWith($('<img class="w-100 h-100 card-img img-fluid" style="object-fit: cover;" />').attr("src","../".concat(callParentNew("thmProj"),"/ImageCard/").concat(e.axpfile_imgcard.split(",")[0]))),e.cardbgclr&&(a.find(".card, table, a:not(.dropdown a, .menu-sub-dropdown a)").addClass("cardbg-"+e.cardbgclr),a.find(".widgetWrapper:not(.optionCardWrapper---) .symbol .symbol-label, button").addClass("cardbg-inverse-"+e.cardbgclr))},_addCardWidth:function(a,e,n){this._getSetCardWidth(a,e,n)&&(this.options.enableMasonry?$(this._getClearFix()).insertBefore(a):$(a.prevAll(":not(.row)").toArray().reverse()).wrapAll('<div class="row" />'))},_addCardHeight:function(a,e,n){a.find(".heightControl").length>0&&this._getSetCardHeight(a.find(".heightControl"),e,n)},_formatOutput:function(a){var e=[],n=[],t=[];for(i=0;i<a.length;i++){for(attr in n=[],a[i])0==i&&e.push({name:attr}),n.push(a[i][attr]);t[i]=n}return{metaData:e,rows:t}},_generateDatatable:function(a,e,n,t){var r=this,o=[],i=parseHyperLink(t.metaData,t.rows[0]);if(n.length>0){var d='\n                    <table class="table" cellspacing="0" width="100%">\n                        <thead>\n                            <tr>\n                                '.concat(Object.keys(n[0]).map(function(a,e){return("link"==a.toLowerCase()||a.toLowerCase().endsWith("_ui")||a.toLowerCase().startsWith("axphide_"))&&o.push(e),a.toLowerCase().startsWith("axphideh_")?"<th></th>":"<th>".concat(a,"</th>")}).join(""),"\n                            </tr>\n                        </thead>\n                    </table>\n                    ");a.html(d),a.find("table").DataTable({data:n,columns:Object.keys(n[0]).map(function(a){return{data:a}}),dom:"t",columnDefs:[{targets:o,visible:!1},{targets:"_all",createdCell:function(a,e,n,o,d){if(Object.keys(n)[d].toLowerCase().startsWith("axphidec_"))$(a).html("");else{var s=!!i&&i.i;!1!==s&&(e=getTheHyperLink(t.rows[o][s],i,customizeData(t.rows[o][d]),d),$(a).html(e)),(styleString=n["".concat(Object.keys(n)[d],"_ui")])&&$(a).html(r._SetAxFontCondition($("<div><div>".concat(e,"</div></div>")).find("div"),styleString).css({"border-radius":"10px"}).parent().html()),$.isNumeric(e)&&$(a).css({"text-align":"right"})}}}],bLengthChange:!1,bPaginate:!1,pageLength:20,initComplete:function(e,n){$(this).css({height:a.height()+"px",overflow:"auto",display:"block"})}})}},_setKpiInfo:function(a,e,n){if(e&&e[0]&&e[0].status){var t=a.find("statusContent");t.parents("card-toolbar").removeClass("d-none"),t.replaceWith($("<div>"+e[0].status+"</div>").attr("title","".concat(e[0].status||""))||"")}e&&e[0]&&e[0].footer?(a.find("footerContent").parents(".card-footer").removeClass("d-none"),a.find("footerContent").replaceWith($("<div>"+e[0].footer+"</div>").attr("title","".concat(e[0].footer||""))||"")):a.find("footerContent").parents(".card-footer").addClass("d-none");var r=(thisdata=e[0][Object.keys(e[0])[0]])||("undefined"!=typeof thisdata?thisdata:""),o="";try{var i=parseHyperLink(n.metaData,n.rows[0]),d=!!i&&i.i;o=!1!==d?getTheHyperLink(n.rows[0][d],i,customizeData(r),parseInt(Object.keys(i.data)[0].replace("col",""))-1):customizeData(r)}catch(s){o=customizeData(r)}a.find("bodyContent").replaceWith($('<div class="fs-2qx---">'.concat(o,"</div>")).attr("title","".concat(e[0][Object.keys(e[0])[0]]||""))||"")},_setOptionsCardInfo:function(a,e,n){var t,r;if(e&&e.length>0){var o=a.find("dropdownInfo");o.parents(".card-toolbar").removeClass("d-none"),o.replaceWith($("".concat(e.map(function(a){return"\n                            ".concat(null!=a&&a.title||null!=a&&a.data||null!=a&&a.data?'\n                            <div class="menu-item p-3">\n                                <div class="d-flex flex-stack">\n                                    <div class="d-flex align-items-center">\n                                        <span class="material-icons material-icons-style px-3">\n                                            '.concat((null==a?void 0:a.materialicon)||"label",'\n                                        </span>\n                                        <div class="d-flex flex-column">\n                                            ').concat(null!=a&&a.title?'<div class="fs-6 fw-semibold text-muted">'.concat(null==a?void 0:a.title,"</div>"):"","\n                                            ").concat(null!=a&&a.data?'<div class="fs-5 text-dark fw-bold">'.concat(null==a?void 0:a.data,"</div>"):"","\n                                            ").concat(null!=a&&a.footer?'<div class="fs-6 fw-semibold text-muted">'.concat(null==a?void 0:a.footer,"</div>"):"","                                                     \n                                        </div>\n                                    </div>\n                                </div>\n                            </div>"):"","\n                        ")}))))}if((null==n?void 0:null===(t=n.cardbuttons)||void 0===t?void 0:null===(r=t.btnoption)||void 0===r?void 0:r.length)>0){var i=a.find("dropdownOptions");i.parents(".card-toolbar").removeClass("d-none");var d=n.cardbuttons.btnoption;i.replaceWith($("".concat(d.map(function(a,e){return"\n                            ".concat(null!=a&&a.Button?'\n                            <a href="javascript:void(0);" onclick="$.axpertUI_dashboard.dashboardcardsPage._callOptionsCardClick(\''.concat(n.axp_cardsid,"', '").concat(a.Button,'\', this);" class="btn btn-sm btn-light-primary btn-active-primary my-1 me-2">\n                                ').concat(a.Caption||"Button ".concat(e+1),"\n                            </a>\n                            "):"","\n                        ")}))))}},_callOptionsCardClick:function(a,e,n){var t;KTMenu.hideDropdowns();var r=null===(t=dashboardcardsPage.options.cards.filter(function(e){return e.axp_cardsid==a}))||void 0===t?void 0:t[0];if(r&&e){var o,i=null===(o=r.cardbuttons.btnoption.filter(function(a){return a.Button==e}))||void 0===o?void 0:o[0];if(i){if(!0===(null==i?void 0:i.scripts))this._callOptionsCardScript(r,i);if(null!=i&&i.Transid){var d="tstruct.aspx?transid=".concat(i.Transid,"&openerIV=").concat(i.Transid,"&isIV=false");null!=i&&i.scripts,AxLoadUrl(d)}else if(null!=i&&i.Iview){d="ivtoivload.aspx?ivname=".concat(i.Iview);if(null!=i&&i.scripts,null!=i&&i.params){var s=i.params;0==s.indexOf("{")&&s.indexOf("}")==s.length-1&&(s=s.substr(1,s.length-2)),s&&(s="&".concat(s.replace(/~/g,"&")))}AxLoadUrl("".concat(d).concat(s))}else if(null!=i&&i.HtmlPageId){d="htmlPages.aspx?load=".concat(i.HtmlPageId);null!=i&&i.scripts,AxLoadUrl(d)}}}},_callOptionsCardScript:function(a,e){var n="";return $.ajax({url:"mainnew.aspx/cardScripts",type:"POST",cache:!1,async:!1,data:JSON.stringify({cardId:a.axp_cardsid,btnName:e.Button}),dataType:"json",contentType:"application/json",success:function(a){if(a&&a.d)try{n=a.d}catch(e){}},error:function(a){}}),n},_setImageCardInfo:function(a,e,n){var t;if((t=n.pagedesc||"")&&a.find("bodyContent").replaceWith($("<div>".concat(t,"</div>")).attr("title","".concat(t||""))||""),n.htransid&&n.htype){a.find("footerContent").parents(".card-footer").removeClass("d-none");var r="";"iview"===n.htype.toLowerCase()?r="ivtoivload.aspx?ivname="+n.htransid:"tstruct"===n.htype.toLowerCase()&&(r="tstruct.aspx?transid="+n.htransid+"&openerIV=".concat(n.htransid,"&isIV=false"));var o="AxLoadUrl('".concat(r,"');");a.find("footerContent").replaceWith($("<a class='imgCardHyperlink' href='javascript:void(0);'>"+(n.hcaption||"Link")+"</a>").attr("onclick","".concat(o||""))||"")}else a.find("footerContent").parents(".card-footer").addClass("d-none")},_setCalendar:function(a,e,n){var t=this,r=a.find("bodyContent").parent();r.find("bodyContent").hide(),r.data("height")||r.data("height",r.css("height")),r.css("height",r.data("height"));var o=$(r).height();try{if(n.obj){var i=a.data("cardIndex");t.options.cards[i]=n,e=t._getCardData(n),n.obj.destroy()}}catch(c){}var d=[{icon:"calendar_view_month",href:"javascript:void(0);",caption:"Month View",onclick:"$.axpertUI_dashboard.dashboardcardsPage.options.cards[".concat(a.data("cardIndex"),"].obj.changeView('dayGridMonth');")},{icon:"calendar_view_week",href:"javascript:void(0);",caption:"Week View",onclick:"$.axpertUI_dashboard.dashboardcardsPage.options.cards[".concat(a.data("cardIndex"),"].obj.changeView('dayGridWeek');")},{icon:"calendar_view_day",href:"javascript:void(0);",caption:"Day View",onclick:"$.axpertUI_dashboard.dashboardcardsPage.options.cards[".concat(a.data("cardIndex"),"].obj.changeView('timeGridDay');")},{icon:"add",href:"javascript:void(0);",caption:"Add Event",onclick:"$.axpertUI_dashboard.dashboardcardsPage._calendarEventClick('', ".concat(a.data("cardIndex"),");")}];a.find(".card-toolbar").removeClass("d-none"),a.find(".card-toolbar .menu.menu-sub.menu-sub-dropdown .separator + .menu-item").remove(),a.find(".card-toolbar .menu.menu-sub.menu-sub-dropdown .menu-item.dynamic-item").remove(),d.forEach(function(e){a.find(".card-toolbar .menu.menu-sub.menu-sub-dropdown").append('\n                    <div class="menu-item px-3 dynamic-item">\n                        <a href="'.concat(e.href,'" onclick="').concat(e.onclick,'" class="menu-link px-3">\n                            <i class="menu-icon material-icons material-icons-style material-icons-2">').concat(e.icon,"</i>\n                            <span>").concat(e.caption,"</span>\n                        </a>\n                    </div>\n                    "))});var s=new FullCalendar.Calendar($(r)[0],{initialView:"dayGridMonth",dayMaxEventRows:!0,views:{timeGrid:{dayMaxEventRows:!0}},height:o,headerToolbar:{start:"title",center:"",end:"addEvent today,prev,next"},buttonText:{today:"today",dayGridMonth:"calendar_view_month",timeGridDay:"calendar_view_day",prev:"navigate_before",next:"navigate_next"},customButtons:{addEvent:{text:"add",click:function(a){t._calendarEventClick(a)}}},events:t._calendarEventData(a,e,n),eventClick:function(e){var n,r;$(".popover.in, .popover.show, .fc-popover").remove();var o=(null==e?void 0:null===(n=e.event)||void 0===n?void 0:null===(r=n._def)||void 0===r?void 0:r.extendedProps).recordid;t._calendarEventClick(o,a.data("cardIndex"))},dateClick:function(e){$(".popover.in, .popover.show, .fc-popover").remove(),t._calendarEventClick("",a.data("cardIndex"),e.dateStr?"".concat(moment(e.dateStr).format("DD/MM/YYYY")):"")},eventDidMount:function(a){var e,n,t,r;$(a.el).find(".fc-event-title").addClass("fw-boldest"),a.event&&(r=null==a?void 0:null===(e=a.event)||void 0===e?void 0:null===(n=e._def)||void 0===n?void 0:null===(t=n.extendedProps)||void 0===t?void 0:t.statusColor)&&$(a.el).find(".fc-event-main-frame").prepend('<span style="background-color:'.concat(r,'" class="bullet border mx-1 mt-2 w-7px h-7px"></span>')),$(a.el).popover({get title(){var e,n,t,r=(null==a?void 0:null===(e=a.event)||void 0===e?void 0:e._def).title,o=(null==a?void 0:null===(n=a.event)||void 0===n?void 0:null===(t=n._def)||void 0===t?void 0:t.extendedProps).type;return"".concat(r?"".concat(r," (").concat(o||"",")"):"")},get content(){var e,n,t="",r=null==a?void 0:null===(e=a.event)||void 0===e?void 0:null===(n=e._def)||void 0===n?void 0:n.extendedProps,o=r.description,i=r.status,d=r.location;return void 0!==o&&""!=o&&(t+=(t?"<br />":"")+'<div class="menu-item"><div class="menu-link px-0 py-1"><span class="menu-icon material-icons material-icons-style material-icons-1 calendarPopoverSpan">description</span><span class="position-relative" style="top: -5px;">'.concat(o,"</span></div></div>")),void 0!==i&&""!=i&&(t+=(t?"\x3c!--<br />--\x3e":"")+'<div class="menu-item"><div class="menu-link px-0 py-1"><span class="menu-icon material-icons material-icons-style material-icons-1 calendarPopoverSpan">analytics</span><span class="position-relative" style="top: -5px;">'.concat(i,"</span></div></div>")),void 0!==d&&""!=d&&(t+=(t?"\x3c!--<br />--\x3e":"")+'<div class="menu-item"><div class="menu-link px-0 py-1"><span class="menu-icon material-icons material-icons-style material-icons-1 calendarPopoverSpan">location_on</span><span class="position-relative" style="top: -5px;">'.concat(d,"</span></div></div>")),t||""},trigger:"hover",placement:"top",container:"body",html:!0,animation:!1,delay:{show:0,hide:0}}).on("shown.bs.popover",function(){setTimeout(function(){$(".popover.show").css("z-index",9999)},0)})}});setTimeout(function(){var a=$.axpertUI_dashboard.dashboardcardsPage;s.render(),n.obj=s,a._generateCalendarLegend(r,n)},0)},_generateCalendarLegend:function(a,e){$.axpertUI_dashboard.dashboardcardsPage;var n=a.next(),t=_toConsumableArray(new Set(e.cardsql.row.map(function(a){return JSON.stringify({type:a.eventtype,color:a.eventcolor})}))).map(function(a){return JSON.parse(a)})||[];t.length>0?(n.removeClass("d-none"),n.find(".dynamic-item").remove(),n.append($(t.map(function(a){return'\n                    <span class="d-flex dynamic-item">\n                        <span style="background-color:'.concat(a.color,'" class="bullet border mx-1 w-20px h-20px">\n                        </span>\n                        <span class="fw-boldest">\n                            ').concat(a.type,"\n                        </span>\n                    </span>\n                    ")}).join("")||"<span></span>"))):n.addClass("d-none")},_calendarEventClick:function _calendarEventClick(){var recordObj=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"",ind=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"",date=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"",_this=$.axpertUI_dashboard.dashboardcardsPage,recordid="",cardElement,card,cardData,transid;"object"==_typeof(recordObj)?(cardElement=$(recordObj.currentTarget).parents(".widgetWrapper"),ind=cardElement.data("cardIndex"),card=_this.options.cards[ind],cardData=_this._getCardData(card)):(cardElement=$(".widgetWrapper[card-index=".concat(ind,"]")),card=_this.options.cards[ind],cardData=_this._getCardData(card),recordid=recordObj),transid=card.calendarstransid||"axcal";var popTitle="Calendar Events";try{var _myModal$modalBody$cl,modalId="loadPopUpPage",modalBodyLink="";modalBodyLink="tstruct.aspx?transid=".concat(transid).concat(void 0!==recordid&&""!=recordid?"&recordid=".concat(recordid):"").concat("string"==typeof date&&""!=date?"&startdate=".concat(date):"","&AxPop=true&act=open");var iFrameModalBody='<iframe id="'.concat(modalId,'" name="').concat(modalId,'" class="col-12 flex-column-fluid w-100 h-100 p-0 my-n1" src="','" frameborder="0" allowtransparency="True"></iframe>'),myModal=new BSModal(modalId,"",iFrameModalBody,function(a,e){try{e.url=modalBodyLink,myModal.modalBody.querySelector("#".concat(modalId)).contentWindow.location.href=modalBodyLink}catch(n){}},function(closing,modal){var isAxPop=modalBodyLink.indexOf("AxPop=true")>-1;if(isAxPop&&eval(callParent("isSuccessAlertInPopUp"))){eval(callParent("isSuccessAlertInPopUp")+"= false");try{var obj=card.obj;card=_this._refreshData(card.axp_cardsid,!0).filter(function(a){return a.axp_cardsid==card.axp_cardsid})[0],cardData=_this._getCardData(card),card.obj=obj,_this._setCalendar(cardElement,cardData,card)}catch(ex){}}});myModal.changeSize("lg"),myModal.scrollableDialog(),myModal.hideHeader(),myModal.hideFooter(),myModal.showFloatingClose(),(_myModal$modalBody$cl=myModal.modalBody.classList).add.apply(_myModal$modalBody$cl,["bg-light","overflow-hidden"]),myModal.modalContent.classList.add("h-100")}catch(error){}},_calendarEventData:function(a,e,n){var t=this,r=[];e=e||[];try{e&&(r=e.map(function(a){return{id:a.axcalendarid||"",title:a.eventname||"",get start(){var e="";if(a.startdate){var n=t._getDateAndFormatBasedOnCulture(a.startdate),r=n.date,o=n.format;if(r&&o){a.axptm_starttime=a.axptm_starttime||"00:00",r="".concat(r," ").concat(a.axptm_starttime),o="".concat(o," hh:mm");try{e=moment(r,o).toISOString()}catch(i){}}}return e},get end(){var e="";if(a.enddate=a.enddate||a.startdate,a.enddate){var n=t._getDateAndFormatBasedOnCulture(a.enddate),r=n.date,o=n.format;if(r&&o){a.axptm_endtime=a.axptm_endtime||"23:59",r="".concat(r," ").concat(a.axptm_endtime),o="".concat(o," hh:mm");try{e=moment(r,o).toISOString()}catch(i){}}}return e},get allDay(){return a.startdate==a.enddate&&"00:00"==a.axptm_starttime&&"23:59"==a.axptm_endtime||1==moment(this.end).diff(moment(this.start),"days")&&"00:00"==a.axptm_starttime&&"00:00"==a.axptm_endtime},type:a.eventtype||"",description:a.messagetext||"",get status(){if(a.eventstatus)return a.eventstatus;switch(a.status){case 0:return"New event";case 1:return"Accepted";case 2:return"Rejected";case 3:return"Reschedule request";case 4:return"Cancel";default:return""}},get statusColor(){return a.eventstatcolor?rgbToHex(getCssByAttr("style","color: ".concat(a.eventstatcolor),"color")):""},location:a.location||"",get classNames(){return this.type.toLowerCase(),""},get color(){return this.type.toLowerCase(),a.eventcolor?rgbToHex(getCssByAttr("style","color: ".concat(a.eventcolor),"color")):""},get textColor(){return this.type.toLowerCase(),a.eventcolor?invert(this.color,_objectSpread(_objectSpread({},appGlobalVarsObject._CONSTANTS.colors),{},{threshold:.2})):""},get borderColor(){return this.textColor},get recordid(){return n.calendarstransid?a.recordid:a.axcalendarid},display:"block",url:"javascript:void(0);"}})||[])}catch(o){}return r},_setHtmlData:function(a,e){var n=this;a.find("bodyContent").replaceWith('<div class="body-content"></div>');var t=$(a.find(".body-content"))[0];if(e.html_editor_card){var r=e.html_editor_card,o=$(r);if(o.data("theme")&&(r=bundleCss.map(function(a){return'<link rel="stylesheet" href="'.concat(a,'" />')}).join("")+r),o.data("handlebars")){var i=o.data("sourceApiName"),d=o.data("sourceApiType");if(i&&"menu"==d){var s=AxGetMenus(i);s=1==Object.keys(s).length?s[Object.keys(s)]:s,e.axRenderProject=callParentNew("thmProj"),e.apiData=s;try{r=Handlebars.compile(r)(e)}catch(c){console.error("Card HTML Templete","menu",c)}n._appendHTMLCardData(a,e,t,o,r)}else!i||"sql"!=d&&"axpert"!=d||AxAsyncGetApiData(i,d,[{id:e.axp_cardsid,cachedata:e.cachedata,cachedTime:String(e.cachedTime).padStart(12,"0"),autorefresh:e.autorefresh}],function(i){var s=JSON.parse(i);s=1==Object.keys(s).length?s[Object.keys(s)]:s,e.axRenderProject=callParentNew("thmProj"),e.apiData=s;try{r=Handlebars.compile(r)(e)}catch(c){console.error("Card HTML Templete",d,c)}n._appendHTMLCardData(a,e,t,o,r)},function(a){})}else n._appendHTMLCardData(a,e,t,o,r)}},_appendHTMLCardData:function(a,e,n,t,r){if(!1===t.data("shadowDom")||!1===t.data("shadowdom"))$(n).append(r);else{var o=n.attachShadow({mode:"open"});e.shadow=o,o.innerHTML=r}},_getDateAndFormatBasedOnCulture:function(a){if(""!=a&&(a=a.split(" ")[0],"en-us"==callParentNew("glCulture"))){var e=a.split("/");e.length>2&&(a=e[1]+"/"+e[0]+"/"+e[2])}return{date:a,format:"en-us"==callParentNew("glCulture")?"MM/DD/YYYY":"DD/MM/YYYY"}},_SetAxFontCondition:function(a,e){if(""!=e){this._ResetAxFont(a),e=e.split(",");for(var n=0;n<e.length;n++){var t=e[n].split("=");switch(t[0].toLowerCase()){case"fontname":a.css("font-family",t[1]);break;case"fontsize":a.css("font-size",t[1]+"pt");break;case"fontstyle":for(var r=0;r<t[1].toLowerCase().length;r++)switch(t[1].toLowerCase()[r]){case"b":a.css("font-weight","bold");break;case"i":a.css("font-style","italic");break;case"u":"line-through"==a.css("text-decoration")?a.css("text-decoration","line-through underline"):a.css("text-decoration","underline");break;case"s":"underline"==a.css("text-decoration")?a.css("text-decoration","underline line-through"):a.css("text-decoration","line-through")}break;case"fontcolor":AxClColors[t[1]]?a.css("color",AxClColors[t[1]]):(t[1].indexOf("#"),a.css("color",t[1]));break;case"backcolor":AxClColors[t[1]]?a.css("background",AxClColors[t[1]]):(t[1].indexOf("#"),a.css("background",t[1]));break;default:a.css(t[0],t[1])}}}else this._ResetAxFont(a);return a},_ResetAxFont:function(a){a.css("font-family",""),a.css("font-weight",""),a.css("font-style",""),a.css("text-decoration",""),a.css("color",""),a.css("background","")},_getSetCardWidth:function(a,e,n){var t=arguments.length>3&&arguments[3]!==undefined&&arguments[3],r="";if((r=e.width||$(a)[0].className)||n&&(r=n.toString()),r){if(0!=(r=r.split(" ").filter(function(a){return 0==a.indexOf("col-")}).reverse().join(" ").toString()).indexOf("col-")&&isNaN(+r)){if(r="",t)return+r}else if(0==r.indexOf("col-")&&(r=r.split("-")[r.split("-").length-1]),r||n&&(r=n.toString()),r){if(t)return+r;a.removeClass(function(a,e){return(e.match(/(^|\s)col-\S+/g)||[]).join(" ")}),a.addClass("col-lg-".concat(r," col-md-").concat(r," col-sm-12 col-xs-12")),(heightControl=a.find(".heightControl"))&&heightControl.length>0&&(setHeight=heightControl.data("height"))&&(heightControl.css({height:"".concat(setHeight)}),heightControl.removeClass(heightControl.attr("class").split(" ").filter(function(a){return a.startsWith("h-")||a.startsWith("mh-")||a.startsWith("min-h-")}).join(" ")))}else if(t)return+r}else if(t)return+r;if(""!==r)return r=+r,this.currentColumnWidth+r>this.options.totalColumns||r>=this.options.totalColumns?(this.currentColumnWidth+r>this.options.totalColumns?this.currentColumnWidth=r:this.currentColumnWidth=0,!0):(this.currentColumnWidth+=r,!1)},_getSetCardHeight:function(a,e,n){var t="";if((t=e.height)||n&&(t=n),t)if((t=t.toString()).indexOf("px")==t.length-2){var r=t.substring(0,t.length-2);"0px"!=(t=r+"px")&&+r>-1&&a.data("height",t)}else t="";else t=""},_getChartJsonProps:function(a,e){if(a.chartjson&&"*"!=a.chartjson){var n={};if("string"==typeof a.chartjson)try{n=JSON.parse(a.chartjson)}catch(t){}else n=a.chartjson;return void 0!==e?void 0!==_.get(n,e)?_.get(n,e):"":n}return""},_cardsWidthPostProcessor:function(a){var e=this;e.options.enableMasonry||(a.children(":not(.row)").wrapAll('<div class="row" />'),a.children().toArray().forEach(function(a){var n=$(a).children().toArray().reduce(function(a,n){return e._getSetCardWidth($(n),"","",!0)+a},0)||0;if(n<12){var t=$(a).children(":last")[0],r=e._getSetCardWidth($(t),"","",!0)+(12-n);e._getSetCardWidth($(t),{width:"col-".concat(r)})}}))},_registerPlugins:function(){var a=this;KTMenu&&KTMenu.init();try{$(a.options.staging.cardsFrame.cardsDesigner).sortable({cursor:"move",update:function(e,n){a.options.designChanged=!0}})}catch(e){}$("".concat(a.options.staging.cardsFrame.cardsDesigner," li input:checkbox")).off("change.showHideChkBox").on("change.showHideChkBox",function(){a.options.designChanged=!0}),$(window).off("resize.cards").on("resize.cards",function(n){$(".widgetWrapper.chartWrapper .highcharts-container").each(function(a,n){try{var t=Highcharts.charts[$(n).parent(".card-body").data("highchartsChart")];setTimeout(function(){t.reflow()},1e3)}catch(e){}}),$(".widgetWrapper.listWrapper table.dataTable").each(function(a,n){try{setTimeout(function(){$(n).css("display",""),$(n).css({height:$(n).parents(".card-body").height()+"px",overflow:"auto",display:"block"})},0)}catch(e){}}),$(".widgetWrapper.calendarWrapper").each(function(n,t){try{var r=a.options.cards[$(t).data("cardIndex")].obj;setTimeout(function(){r.render()},1e3)}catch(e){}})}),a.options.enableMasonry&&setTimeout(function(){$(a.options.staging.cardsFrame.cardsDiv).data("masonry")&&$(a.options.staging.cardsFrame.cardsDiv).masonry("destroy"),$(a.options.staging.cardsFrame.div+" "+a.options.staging.cardsFrame.cardsDiv).masonry({itemSelector:".widgetWrapper",columnWidth:".grid-sizer",percentPosition:!0})},0)},_getClearFix:function(){return'<div class="clearfix"></div>'}},tooltipsPopovers={activate:function(){$('[data-toggle="tooltip"]').tooltip({container:"body"}),$('[data-toggle="popover"]').popover().on("shown.bs.modal",function(){})}},dashboardGrouping={groupingVars:{groupJson:[],cardsJson:[],rowCount:0,groupAccordionHTML:'<div class="col-xl-12 col-lg-12 col-sm-12 Invoice-content-wrap group-accordion d-none">\n                <a href="#" class="Invoice-item accordion-header accordion-button fs-4 fw-semibold" data-bs-toggle="collapse" data-bs-target="#group_{{index}}" aria-expanded="false" aria-controls="group_{{index}}">\n                    <div class="Invoice-icon">\n                        <span class="material-icons material-icons-style material-icons-2">bar_chart</span>\n                    </div>\n                    <div class="Invoice-content">\n                        <h1>{{groupname}}</h1>\n                    </div>\n                </a>\n                <div id="group_{{index}}" data-groupname="{{groupname}}" class="group-container accordion-collapse collapse show row" aria-labelledby="group_{{index}}">\n                </div>\n            </div> '},init:function(){var a=$.axpertUI_dashboard.dashboardGrouping;_entityCommon.getAnalyticsDataSyncWS({page:"DASHBOARD",transId:"",propertiesList:["CARD_GROUP"]},function(e){var n=JSON.parse(e).result.data.CARD_GROUP;_entityCommon.isValid(n)&&(a.groupingVars.groupJson=JSON.parse(n))},function(a){showAlertDialog("error","Error in grouping fetch"+a)})},getOtherSelectedCards:function(a){$.axpertUI_dashboard.dashboardGrouping;var e=new Set;return document.querySelectorAll(".card-select").forEach(function(n){n!==a&&($(n).val()||[]).forEach(function(a){return e.add(parseInt(a))})}),e},initializeSelect2:function(a){var e=$.axpertUI_dashboard.dashboardGrouping,n=e.getOtherSelectedCards(a),t=$(a).val()||[],r=e.groupingVars.cardsJson.filter(function(a){return!n.has(a.axp_cardsid)||t.includes(a.axp_cardsid.toString())});$(a).select2({data:r.map(function(a){return{id:a.axp_cardsid,text:a.cardname}}),placeholder:"Select Cards",width:"100%"}).on("change",function(a){e.updateAllDropdowns(),e.validateField(this,"cards")})},updateAllDropdowns:function(){var a=$.axpertUI_dashboard.dashboardGrouping;document.querySelectorAll(".card-select").forEach(function(e){var n=$(e).val();a.initializeSelect2(e),$(e).val(n).trigger("change.select2")})},addCardGroupingRow:function(){var a=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null,e=$.axpertUI_dashboard.dashboardGrouping;e.groupingVars.rowCount++;var n=document.createElement("div");n.className="grid-row",n.innerHTML="\n            <div>".concat(e.groupingVars.rowCount,'</div>\n            <div>\n                <input type="text" class="group-name" placeholder="Enter group name" value="').concat(a?a.groupname:"",'" onblur="$.axpertUI_dashboard.dashboardGrouping.validateField(this, \'groupname\')">\n                <div class="error-msg">Group name is required</div>\n            </div>\n            <div>\n                <select class="card-select" multiple></select>\n                <div class="error-msg">Please select at least one card</div>\n            </div>\n            <div>\n                <input type="number" class="order-no" value="').concat(a?a.orderno:e.groupingVars.rowCount,'" onblur="$.axpertUI_dashboard.dashboardGrouping.validateField(this, \'orderno\')">\n                <div class="error-msg">Order number is required</div>\n            </div>\n            <div><button class="delete-btn" onclick="$.axpertUI_dashboard.dashboardGrouping.deleteRow(this)"><i class="material-icons">delete</i></button></div>\n        '),document.getElementById("grid-body").appendChild(n);var t=n.querySelector(".card-select");e.initializeSelect2(t),a&&a.cards&&$(t).val(a.cards).trigger("change"),n.querySelector(".group-name").addEventListener("input",function(){e.validateField(this,"groupname")}),n.querySelector(".order-no").addEventListener("input",function(){e.validateField(this,"orderno")})},validateField:function(a,e){$.axpertUI_dashboard.dashboardGrouping;var n=a.closest(".grid-row"),t=a.parentElement.querySelector(".error-msg"),r=!0;switch(e){case"groupname":r=""!==a.value.trim();break;case"cards":r=$(a).val()&&$(a).val().length>0;break;case"orderno":r=""!==a.value.trim()&&!isNaN(a.value)}return a.classList.toggle("error",!r),t&&(t.style.display=r?"none":"block"),n.classList.toggle("has-error",!r),r},validateRow:function(a){var e=$.axpertUI_dashboard.dashboardGrouping,n=e.validateField(a.querySelector(".group-name"),"groupname"),t=e.validateField(a.querySelector(".card-select"),"cards"),r=e.validateField(a.querySelector(".order-no"),"orderno");return n&&t&&r},deleteRow:function(a){var e=$.axpertUI_dashboard.dashboardGrouping;a.closest(".grid-row").remove(),e.updateSerialNumbers(),e.updateAllDropdowns()},updateSerialNumbers:function(){var a=$.axpertUI_dashboard.dashboardGrouping,e=document.querySelectorAll(".grid-row");e.forEach(function(a,e){a.firstElementChild.textContent=e+1}),a.groupingVars.rowCount=e.length},submitCardGrouping:function(){$.axpertUI_dashboard.dashboardGrouping;var a=document.querySelectorAll(".grid-row"),e=Array.from(a).map(function(a){return{groupname:a.querySelector(".group-name").value,cards:$(a.querySelector(".card-select")).val().map(Number),orderno:parseInt(a.querySelector(".order-no").value)}}).sort(function(a,e){return a.orderno-e.orderno}),n={page:"DASHBOARD",transId:"",properties:{CARD_GROUP:JSON.stringify(e)},allUsers:!0,confirmNeeded:!0};_entityCommon.setAnalyticsDataWS(n,function(){showAlertDialog("success","Card Groups saved successfully."),window.location.reload()},function(a){showAlertDialog("error","Error saving grouped data:",a)})},checkDuplicateCards:function(){var a=$.axpertUI_dashboard.dashboardGrouping,e=document.querySelectorAll(".grid-row"),n=new Map,t=[];if(e.forEach(function(a){return a.classList.remove("has-error")}),e.forEach(function(a){var e=a.querySelector(".group-name").value;($(a.querySelector(".card-select")).val()||[]).forEach(function(a){n.has(a)?n.get(a).push(e):n.set(a,[e])})}),n.forEach(function(e,n){if(e.length>1){var r=a.groupingVars.cardsJson.find(function(a){return a.axp_cardsid===parseInt(n)}).cardname;t.push({card:r,groups:e})}}),t.length>0){var r=t.map(function(a){return'Card "'.concat(a.card,'" is mapped to multiple groups: ').concat(a.groups.join(", "))});return showAlertDialog("error",r),e.forEach(function(e){($(e.querySelector(".card-select")).val()||[]).some(function(e){return t.some(function(n){return n.card===a.groupingVars.cardsJson.find(function(a){return a.axp_cardsid===parseInt(e)}).cardname})})&&(e.classList.add("has-error"),e.querySelector(".card-select").classList.add("error"))}),!1}return!0},validateAndSubmit:function(){var a=$.axpertUI_dashboard.dashboardGrouping,e=document.querySelectorAll(".grid-row"),n=!0;e.forEach(function(e){a.validateRow(e)||(n=!1)}),n&&(n=a.checkDuplicateCards()),n?a.submitCardGrouping():document.getElementById("duplicate-error").style.display||showAlertDialog("Error","Please fill in all required fields correctly.")},getGroupNameByCardId:function(a){var e=$.axpertUI_dashboard.dashboardGrouping;if(e.groupingVars.groupJson&&e.groupingVars.groupJson.length>0){var n,t=_createForOfIteratorHelper(e.groupingVars.groupJson);try{for(t.s();!(n=t.n()).done;){var r=n.value;if(r.cards.includes(a))return r.groupname}}catch(o){t.e(o)}finally{t.f()}return"Others"}return""},createGroupAccordions:function(a){var e=$.axpertUI_dashboard.dashboardGrouping,n="";e.groupingVars.groupJson.length>0&&(e.groupingVars.groupJson.forEach(function(a,t){a.index=t,n+=Handlebars.compile(e.groupingVars.groupAccordionHTML)(a)}),n+=Handlebars.compile(e.groupingVars.groupAccordionHTML)({index:e.groupingVars.groupJson.length,groupname:"Others"})),a.append(n)},resetCardGrouping:function(){var a={page:"DASHBOARD",transId:"",properties:{CARD_GROUP:JSON.stringify([])},allUsers:!0,confirmNeeded:!0};_entityCommon.setAnalyticsDataWS(a,function(){showAlertDialog("success","Card Groups resetted successfully."),window.location.reload()},function(a){showAlertDialog("error","Error saving grouped data:",a)})},openCardGrouping:function(){var a=$.axpertUI_dashboard.dashboardGrouping;$("#groupingModal").modal("show"),$("#groupingModal").hasClass("content-loaded")||(a.groupingVars.groupJson.length>0?a.groupingVars.groupJson.forEach(function(e){a.addCardGroupingRow(e)}):a.addCardGroupingRow(),$("#groupingModal").addClass("content-loaded"))}},browser={activate:function(a){this.isHybrid=a,this.browsers={edge:"Microsoft Edge",edgeLegacy:"Microsoft Edge Legacy",ie10:"Internet Explorer 10",ie11:"Internet Explorer 11",opera:"Opera",firefox:"Mozilla Firefox",chrome:"Google Chrome",safari:"Safari"};var e=this.getClassName();""!==e&&$("html").addClass(e),("undefined"==typeof isiOS||_typeof(isiOS))&&isiOS&&$("body").addClass("iOS"),this.isHybrid&&$("body").addClass("isHybrid")},getBrowser:function(){var a=navigator.userAgent.toLowerCase();return/edge/i.test(a)?this.browsers.edgeLegacy:/edg/i.test(a)?this.browsers.edge:/rv:11/i.test(a)?this.browsers.ie11:/msie 10/i.test(a)?this.browsers.ie10:/opr/i.test(a)?this.browsers.opera:/chrome/i.test(a)?this.browsers.chrome:/firefox/i.test(a)?this.browsers.firefox:navigator.userAgent.match(/Version\/[\d\.]+.*Safari/)?this.browsers.safari:undefined},getClassName:function(){var a=this.getBrowser();return a===this.browsers.edge?"edge":a===this.browsers.edgeLegacy?"edgeLegacy":a===this.browsers.ie11?"ie11":a===this.browsers.ie10?"ie10":a===this.browsers.opera?"opera":a===this.browsers.chrome?"chrome":a===this.browsers.firefox?"firefox":a===this.browsers.safari?"safari":""}},init=function(a){return this.options=$.extend(!0,{},this.options,a),dashboardcardsPage.activate(this.options.dashboardcardsPage),this.options},{options:options,dashboardcardsPage:dashboardcardsPage,browser:browser,init:init,dashboardGrouping:dashboardGrouping}}$_this=this,$.axpertUI_dashboard=new axpertUI_dashboard}(jQuery,window);